function __c_b_envHttpGet(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.onload=function(){e&&e(r.response,r)},r.onerror=function(){n&&n(r.response)},r.send()}function __c_b_envHttpPost(t,e,n){var r=new XMLHttpRequest;r.open(method,t),r.onload=function(){e(r.response)},r.onerror=function(){n(r.response)},r.send()}function __c_b_envTemplateAttachByUrl(t,e,n){__c_b_app.http.get(t,function(t){e.innerHTML=t,n&&n()},function(t){console.log(t)})}function createRootEle(t){var e=document.createElement(__c_b_app.env.ref.root.ele.name);e.id=__c_b_app.env.ref.root.ele.name;document.body.appendChild(e);__c_b_app.env.ref.root.ele.elm=document.querySelectorAll("["+__c_b_app.env.ref.root.ele.name+"]")[0];intervalID=setTimeout(function(){document.querySelectorAll("bot-flow-root")[0]&&(t(),clearInterval(null))},1),setTimeout(function(){clearInterval(null)},15e3)}function addRootStyles(){var t=document.createElement("style");t.type="text/css",t.setAttribute(__c_b_app.env.ref.root.style.name,""),document.getElementsByTagName("head")[0].appendChild(t),__c_b_app.env.ref.root.style.elm=document.querySelectorAll("["+__c_b_app.env.ref.root.style.name+"]")[0],__c_b_app.env.ref.root.style.elm.innerHTML='@import url("https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i,900,900i");\n@keyframes sk-bouncedelay {\n  0% {\n    -webkit-transform: scale(0);\n    transform: scale(0); }\n  80% { }\n  100% {\n    -webkit-transform: scale(0);\n    transform: scale(0); }\n  40% {\n    -webkit-transform: scale(1);\n    transform: scale(1); } }\n\n@keyframes placeHolderShimmer {\n  0% {\n    background-position: -200px 0; }\n  100% {\n    background-position: 200px 0; } }\n\n@keyframes bot_open {\n  0% {\n    top: 96%;\n    right: 25px;\n    transform: scale(0, 0); }\n  60% {\n    top: 20%;\n    right: 0;\n    transform: scale(0.2, 0.2); }\n  100% {\n    bottom: 0;\n    right: 0;\n    transform: scale(1, 1); } }\n\n@keyframes zoomOut {\n  0% {\n    transform: scale(0, 0);\n    opacity: 0.3; }\n  100% {\n    transform: scale(1, 1);\n    opacity: 1; } }\n\n@keyframes spinner {\n  0% {\n    transform: rotate(0deg); }\n  100% {\n    transform: rotate(360deg); } }\n\n._c_b_app ._ripple {\n  position: relative;\n  overflow: hidden;\n  transform: translate3d(0, 0, 0); }\n  ._c_b_app ._ripple:after {\n    content: "";\n    display: block;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    pointer-events: none;\n    background-image: radial-gradient(circle, white 10%, transparent 10.01%);\n    background-repeat: no-repeat;\n    background-position: 50%;\n    transform: scale(10, 10);\n    opacity: 0;\n    transition: transform .5s, opacity 1s; }\n  ._c_b_app ._ripple:active:after {\n    transform: scale(0, 0);\n    opacity: .5;\n    transition: 0s; }\n\n._c_b_app {\n  display: none;\n  flex-direction: column;\n  position: fixed;\n  top: 0;\n  height: 100%;\n  width: 350px;\n  animation-name: bot_open;\n  animation-duration: 0.2s;\n  animation-timing-function: ease-in-out;\n  right: 0;\n  font-family: \'Roboto\', sans-serif;\n  box-shadow: 0 3px 11px 0px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12); }\n  ._c_b_app.active {\n    display: flex; }\n  ._c_b_app ._tpbr {\n    height: 52px;\n    min-height: 52px;\n    background-color: #607D8B;\n    color: rgba(255, 255, 255, 0.87);\n    display: flex;\n    align-items: center;\n    padding: 0 11px;\n    position: relative; }\n    ._c_b_app ._tpbr ._cls {\n      position: absolute;\n      top: 0;\n      right: 0;\n      width: 52px;\n      height: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      cursor: pointer;\n      transition: 0.2 all; }\n      ._c_b_app ._tpbr ._cls:hover {\n        background-color: rgba(255, 255, 255, 0.2); }\n      ._c_b_app ._tpbr ._cls path {\n        fill: rgba(255, 255, 255, 0.87); }\n  ._c_b_app ._bd {\n    flex-grow: 1;\n    overflow-y: auto;\n    color: rgba(0, 0, 0, 0.87);\n    background-color: rgba(232, 239, 245, 0.38);\n    padding: 0 11px;\n    position: relative; }\n    ._c_b_app ._bd::-webkit-scrollbar {\n      width: 5px; }\n    ._c_b_app ._bd::-webkit-scrollbar-track {\n      background-color: transparent; }\n    ._c_b_app ._bd::-webkit-scrollbar-thumb {\n      background-color: #999;\n      border-radius: 7px; }\n    ._c_b_app ._bd ._pged {\n      display: block;\n      background-color: #fff;\n      padding: 9px;\n      color: #000;\n      font-weight: 100;\n      font-size: 10px;\n      text-align: center;\n      letter-spacing: 1.1px;\n      border-radius: 0 0px 5px 5px; }\n  ._c_b_app ._fld {\n    height: 52px;\n    max-height: 52px;\n    min-height: 52px;\n    display: flex;\n    align-items: center;\n    position: relative;\n    border-top: 1px solid rgba(169, 169, 169, 0.19);\n    box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2), 7px -2px 10px 1px rgba(0, 0, 0, 0.14), 17px -4px 14px 2px rgba(0, 0, 0, 0.02);\n    z-index: 99; }\n    ._c_b_app ._fld ._inpt {\n      display: flex;\n      align-items: center;\n      width: 100%;\n      position: relative; }\n      ._c_b_app ._fld ._inpt ._input {\n        height: 100%;\n        width: 100%;\n        border: 0;\n        outline: none;\n        padding: 0 55px 0px 11px;\n        color: rgba(43, 43, 43, 0.97);\n        font-size: 16px;\n        letter-spacing: 0.03em; }\n      ._c_b_app ._fld ._inpt ._fab {\n        width: 33px;\n        height: 33px;\n        position: absolute;\n        right: 11px;\n        background-color: #607D8B;\n        border-radius: 50px;\n        align-items: center;\n        display: flex;\n        justify-content: center;\n        cursor: pointer;\n        transition: 0.2s all;\n        border: none;\n        outline: none; }\n        ._c_b_app ._fld ._inpt ._fab[disabled] {\n          opacity: 0;\n          pointer-events: none; }\n        ._c_b_app ._fld ._inpt ._fab:hover {\n          transition: 0.6s all;\n          background-image: radial-gradient(circle, rgba(255, 255, 255, 0.26) 70%, transparent 10.01%); }\n        ._c_b_app ._fld ._inpt ._fab ._post {\n          margin-left: 2px;\n          position: absolute;\n          width: 0px;\n          height: 0px;\n          border-left: solid 11px rgba(255, 255, 255, 0.87);\n          border-bottom: solid 9px transparent;\n          border-top: solid 9px transparent; }\n\n._c_b_app_tglbtn {\n  display: inline-flex;\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  border-radius: 50em;\n  background-color: #607D8B;\n  color: rgba(255, 255, 255, 0.87);\n  padding: 11px 13px;\n  align-items: center;\n  justify-content: center;\n  font-family: \'Roboto\', sans-serif;\n  cursor: pointer;\n  transition: 0.3s all;\n  font-weight: bold;\n  animation-name: zoomOut;\n  animation-duration: 0.3s;\n  animation-timing-function: ease-in-out; }\n  ._c_b_app_tglbtn:hover {\n    transform: scale(1.1, 1.1); }\n  ._c_b_app_tglbtn ._ic {\n    margin-right: 7px; }\n    ._c_b_app_tglbtn ._ic ._ldr {\n      width: 16px;\n      height: 16px;\n      border: 2px solid rgba(255, 255, 255, 0.1);\n      border-top: 2px solid #fff;\n      border-radius: 50em;\n      animation: spinner 0.73s linear infinite; }\n    ._c_b_app_tglbtn ._ic path {\n      fill: rgba(255, 255, 255, 0.87); }\n\n._c_b_app ._msg {\n  display: flex;\n  width: 100%;\n  margin: 11px 0; }\n  ._c_b_app ._msg ._icn {\n    background-color: rgba(234, 234, 234, 0.6);\n    border-radius: 50em;\n    width: 24px;\n    height: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center; }\n  ._c_b_app ._msg ._item {\n    max-width: 65%;\n    background-color: #607D8B;\n    color: rgba(255, 255, 255, 0.87);\n    padding: 9px;\n    border-radius: 0px 7px 7px 7px;\n    position: relative;\n    margin-left: 11px;\n    border-color: #607D8B; }\n    ._c_b_app ._msg ._item:before {\n      content: "";\n      width: 0;\n      height: 0;\n      position: absolute;\n      top: 0;\n      right: 100%;\n      border-width: 0px 7px 7px 0;\n      border-style: solid;\n      border-color: transparent;\n      border-right-color: inherit; }\n  ._c_b_app ._msg._user {\n    justify-content: flex-end; }\n    ._c_b_app ._msg._user ._item {\n      background-color: rgba(234, 234, 234, 0.6);\n      max-width: 80%;\n      color: #333;\n      margin-right: 11px;\n      border-color: rgba(234, 234, 234, 0.6);\n      border-radius: 7px 0px 7px 7px; }\n      ._c_b_app ._msg._user ._item:before {\n        left: 100%;\n        border-width: 0px 7px 7px 7px;\n        border-color: transparent;\n        border-left-color: inherit; }\n\n._c_b_app ._typing ._anim {\n  text-align: left;\n  display: inline-block;\n  background-color: #e0e0e0;\n  margin: 5px 0 5px 13px;\n  padding: 7px 11px;\n  border-radius: 5px;\n  display: inline-flex;\n  align-items: center;\n  min-height: 21px; }\n  ._c_b_app ._typing ._anim > div {\n    width: 12px;\n    height: 12px;\n    background-color: #565656;\n    border-radius: 100%;\n    animation: sk-bouncedelay 0.8s infinite ease-in-out both; }\n    ._c_b_app ._typing ._anim > div._bounce1 {\n      animation-delay: -0.32s;\n      height: 5px;\n      width: 5px;\n      margin-right: 7px; }\n    ._c_b_app ._typing ._anim > div._bounce2 {\n      animation-delay: -0.16s;\n      width: 8px;\n      height: 8px;\n      margin-right: 4px; }\n\n._c_b_app ._ldr {\n  display: block; }\n  ._c_b_app ._ldr ._itm {\n    display: block;\n    margin: 5px 0; }\n    ._c_b_app ._ldr ._itm ._ld {\n      min-height: 21px;\n      background-color: #f0f0f0;\n      border-radius: 3px;\n      max-width: 50%;\n      width: 50%;\n      background: linear-gradient(to right, #eeeeee 8%, #dddddd 18%, #eeeeee 33%);\n      background-size: 400px 104px;\n      position: relative;\n      animation-name: placeHolderShimmer;\n      animation-timing-function: linear;\n      animation-fill-mode: forwards;\n      animation-duration: 0.9s;\n      animation-iteration-count: infinite; }\n    ._c_b_app ._ldr ._itm._rt {\n      overflow: hidden; }\n      ._c_b_app ._ldr ._itm._rt ._ld {\n        float: right; }\n\n._c_b_app ._sgtn {\n  display: inline-block;\n  background-color: #fff;\n  color: #333;\n  min-width: 90px;\n  margin: 0 9px 9px 9px;\n  border-radius: 3px;\n  border: 1px solid rgba(233, 233, 233, 0.58);\n  max-width: 80%;\n  box-shadow: 1px 1px 1px rgba(217, 217, 217, 0.42); }\n  ._c_b_app ._sgtn ._itm {\n    padding: 7px;\n    font-size: 14px;\n    font-weight: 400;\n    transition: 0.2s all;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(233, 233, 233, 0.25); }\n    ._c_b_app ._sgtn ._itm:first-child {\n      border-radius: 3px 3px 0 0; }\n    ._c_b_app ._sgtn ._itm:last-child {\n      border-radius: 0 0 3px 3px; }\n    ._c_b_app ._sgtn ._itm:hover {\n      background-color: #607D8B;\n      color: rgba(255, 255, 255, 0.87); }\n  ._c_b_app ._sgtn._option {\n    display: flex;\n    background-color: transparent;\n    box-shadow: none;\n    border: none;\n    flex-wrap: wrap; }\n    ._c_b_app ._sgtn._option ._itm {\n      background-color: #fff;\n      padding: 7px 11px;\n      color: #333;\n      margin: 0 2px 3px 2px;\n      border-radius: 3px;\n      border: 1px solid #607D8B; }\n      ._c_b_app ._sgtn._option ._itm:hover {\n        background-color: #607D8B;\n        color: rgba(255, 255, 255, 0.87); }\n'}function initApp(){__c_b_app.bootApp()}function bootApp(){addRootStyles(),createRootEle(function(){initApp()})}(function(){function t(t,n,r,i){return new e(t,n,r,i)}function e(t,e,r,i){this.options=i||{},this.options.adapters=this.options.adapters||{},this.obj=t,this.keypath=e,this.callback=r,this.objectPath=[],this.update=this.update.bind(this),this.parse(),n(this.target=this.realize())&&this.set(!0,this.key,this.target,this.callback)}function n(t){return"object"==typeof t&&null!==t}function r(t){throw new Error("[sightglass] "+t)}t.adapters={},e.tokenize=function(t,e,n){var r,i,o=[],s={i:n,path:""};for(r=0;r<t.length;r++)i=t.charAt(r),~e.indexOf(i)?(o.push(s),s={i:i,path:""}):s.path+=i;return o.push(s),o},e.prototype.parse=function(){var n,i,o=this.interfaces();o.length||r("Must define at least one adapter interface."),~o.indexOf(this.keypath[0])?(n=this.keypath[0],i=this.keypath.substr(1)):(void 0===(n=this.options.root||t.root)&&r("Must define a default root adapter."),i=this.keypath),this.tokens=e.tokenize(i,o,n),this.key=this.tokens.pop()},e.prototype.realize=function(){var t,e=this.obj,r=!1;return this.tokens.forEach(function(i,o){n(e)?(void 0!==this.objectPath[o]?e!==(t=this.objectPath[o])&&(this.set(!1,i,t,this.update),this.set(!0,i,e,this.update),this.objectPath[o]=e):(this.set(!0,i,e,this.update),this.objectPath[o]=e),e=this.get(i,e)):(!1===r&&(r=o),(t=this.objectPath[o])&&this.set(!1,i,t,this.update))},this),!1!==r&&this.objectPath.splice(r),e},e.prototype.update=function(){var t,e;(t=this.realize())!==this.target&&(n(this.target)&&this.set(!1,this.key,this.target,this.callback),n(t)&&this.set(!0,this.key,t,this.callback),e=this.value(),this.target=t,(this.value()instanceof Function||this.value()!==e)&&this.callback())},e.prototype.value=function(){return n(this.target)?this.get(this.key,this.target):void 0},e.prototype.setValue=function(t){n(this.target)&&this.adapter(this.key).set(this.target,this.key.path,t)},e.prototype.get=function(t,e){return this.adapter(t).get(e,t.path)},e.prototype.set=function(t,e,n,r){var i=t?"observe":"unobserve";this.adapter(e)[i](n,e.path,r)},e.prototype.interfaces=function(){var e=Object.keys(this.options.adapters);return Object.keys(t.adapters).forEach(function(t){~e.indexOf(t)||e.push(t)}),e},e.prototype.adapter=function(e){return this.options.adapters[e.i]||t.adapters[e.i]},e.prototype.unobserve=function(){var t;this.tokens.forEach(function(e,n){(t=this.objectPath[n])&&this.set(!1,e,t,this.update)},this),n(this.target)&&this.set(!1,this.key,this.target,this.callback)},"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define([],function(){return this.sightglass=t}):this.sightglass=t}).call(this),function(){var t,e,n,r,i,o=function(t,e){return function(){return t.apply(e,arguments)}},s=[].slice,a={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};t={options:["prefix","templateDelimiters","rootInterface","preloadData","handler","executeFunctions"],extensions:["binders","formatters","components","adapters"],public:{binders:{},components:{},formatters:{},adapters:{},prefix:"rv",templateDelimiters:["{","}"],rootInterface:".",preloadData:!0,executeFunctions:!1,iterationAlias:function(t){return"%"+t+"%"},handler:function(t,e,n){return this.call(t,e,n.view.models)},configure:function(e){var n,r,i,o;null==e&&(e={});for(i in e)if(o=e[i],"binders"===i||"components"===i||"formatters"===i||"adapters"===i)for(r in o)n=o[r],t[i][r]=n;else t.public[i]=o},bind:function(e,n,r){var i;return null==n&&(n={}),null==r&&(r={}),(i=new t.View(e,n,r)).bind(),i},init:function(e,n,r){var i,o,s;if(null==r&&(r={}),null==n&&(n=document.createElement("div")),e=t.public.components[e],(o=e.template.call(this,n))instanceof HTMLElement){for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(o)}else n.innerHTML=o;return i=e.initialize.call(this,n,r),(s=new t.View(n,i)).bind(),s}}},window.jQuery||window.$?(n=window.jQuery||window.$,i="on"in n.prototype?["on","off"]:["bind","unbind"],e=i[0],r=i[1],t.Util={bindEvent:function(t,r,i){return n(t)[e](r,i)},unbindEvent:function(t,e,i){return n(t)[r](e,i)},getInputValue:function(t){var e;return"checkbox"===(e=n(t)).attr("type")?e.is(":checked"):e.val()}}):t.Util={bindEvent:"addEventListener"in window?function(t,e,n){return t.addEventListener(e,n,!1)}:function(t,e,n){return t.attachEvent("on"+e,n)},unbindEvent:"removeEventListener"in window?function(t,e,n){return t.removeEventListener(e,n,!1)}:function(t,e,n){return t.detachEvent("on"+e,n)},getInputValue:function(t){var e,n,r,i;if("checkbox"===t.type)return t.checked;if("select-multiple"===t.type){for(i=[],n=0,r=t.length;r>n;n++)(e=t[n]).selected&&i.push(e.value);return i}return t.value}},t.TypeParser=function(){function t(){}return t.types={primitive:0,keypath:1},t.parse=function(t){return/^'.*'$|^".*"$/.test(t)?{type:this.types.primitive,value:t.slice(1,-1)}:"true"===t?{type:this.types.primitive,value:!0}:"false"===t?{type:this.types.primitive,value:!1}:"null"===t?{type:this.types.primitive,value:null}:"undefined"===t?{type:this.types.primitive,value:void 0}:""===t?{type:this.types.primitive,value:void 0}:!1===isNaN(Number(t))?{type:this.types.primitive,value:Number(t)}:{type:this.types.keypath,value:t}},t}(),t.TextTemplateParser=function(){function t(){}return t.types={text:0,binding:1},t.parse=function(t,e){var n,r,i,o,s,a,c;for(a=[],o=t.length,n=0,r=0;o>r;){if(0>(n=t.indexOf(e[0],r))){a.push({type:this.types.text,value:t.slice(r)});break}if(n>0&&n>r&&a.push({type:this.types.text,value:t.slice(r,n)}),r=n+e[0].length,0>(n=t.indexOf(e[1],r))){s=t.slice(r-e[1].length),(null!=(i=a[a.length-1])?i.type:void 0)===this.types.text?i.value+=s:a.push({type:this.types.text,value:s});break}c=t.slice(r,n).trim(),a.push({type:this.types.binding,value:c}),r=n+e[1].length}return a},t}(),t.View=function(){function e(e,n,r){var i,s,a,c,l,u,p,h,f,d,m,g,v;for(this.els=e,this.models=n,null==r&&(r={}),this.update=o(this.update,this),this.publish=o(this.publish,this),this.sync=o(this.sync,this),this.unbind=o(this.unbind,this),this.bind=o(this.bind,this),this.select=o(this.select,this),this.traverse=o(this.traverse,this),this.build=o(this.build,this),this.buildBinding=o(this.buildBinding,this),this.bindingRegExp=o(this.bindingRegExp,this),this.options=o(this.options,this),this.els.jquery||this.els instanceof Array||(this.els=[this.els]),l=0,p=(f=t.extensions).length;p>l;l++){if(s=f[l],this[s]={},r[s]){d=r[s];for(i in d)a=d[i],this[s][i]=a}m=t.public[s];for(i in m)a=m[i],null==(c=this[s])[i]&&(c[i]=a)}for(u=0,h=(g=t.options).length;h>u;u++)s=g[u],this[s]=null!=(v=r[s])?v:t.public[s];this.build()}return e.prototype.options=function(){var e,n,r,i,o;for(n={},r=0,i=(o=t.extensions.concat(t.options)).length;i>r;r++)e=o[r],n[e]=this[e];return n},e.prototype.bindingRegExp=function(){return new RegExp("^"+this.prefix+"-")},e.prototype.buildBinding=function(e,n,r,i){var o,s,a,c,l,u,p;return l={},p=function(){var t,e,n,r;for(r=[],t=0,e=(n=i.match(/((?:'[^']*')*(?:(?:[^\|']*(?:'[^']*')+[^\|']*)+|[^\|]+))|^$/g)).length;e>t;t++)u=n[t],r.push(u.trim());return r}(),o=function(){var t,e,n,r;for(r=[],t=0,e=(n=p.shift().split("<")).length;e>t;t++)s=n[t],r.push(s.trim());return r}(),c=o.shift(),l.formatters=p,(a=o.shift())&&(l.dependencies=a.split(/\s+/)),this.bindings.push(new t[e](this,n,r,c,l))},e.prototype.build=function(){var e,n,r,i,o;for(this.bindings=[],n=function(e){return function(r){var i,o,s,a,c,l,u,p,h,f,d,m,g;if(3===r.nodeType){if(c=t.TextTemplateParser,(s=e.templateDelimiters)&&(p=c.parse(r.data,s)).length&&(1!==p.length||p[0].type!==c.types.text)){for(h=0,d=p.length;d>h;h++)u=p[h],l=document.createTextNode(u.value),r.parentNode.insertBefore(l,r),1===u.type&&e.buildBinding("TextBinding",l,null,u.value);r.parentNode.removeChild(r)}}else 1===r.nodeType&&(i=e.traverse(r));if(!i)for(g=function(){var t,e,n,i;for(i=[],t=0,e=(n=r.childNodes).length;e>t;t++)a=n[t],i.push(a);return i}(),f=0,m=g.length;m>f;f++)o=g[f],n(o)}}(this),r=0,i=(o=this.els).length;i>r;r++)e=o[r],n(e);this.bindings.sort(function(t,e){var n,r;return((null!=(n=e.binder)?n.priority:void 0)||0)-((null!=(r=t.binder)?r.priority:void 0)||0)})},e.prototype.traverse=function(e){var n,r,i,o,s,a,c,l,u,p,h,f,d,m,g;for(o=this.bindingRegExp(),s="SCRIPT"===e.nodeName||"STYLE"===e.nodeName,u=0,h=(d=e.attributes).length;h>u;u++)if(n=d[u],o.test(n.name)){if(c=n.name.replace(o,""),!(i=this.binders[c])){m=this.binders;for(a in m)l=m[a],"*"!==a&&-1!==a.indexOf("*")&&new RegExp("^"+a.replace(/\*/g,".+")+"$").test(c)&&(i=l)}i||(i=this.binders["*"]),i.block&&(s=!0,r=[n])}for(p=0,f=(g=r||e.attributes).length;f>p;p++)n=g[p],o.test(n.name)&&(c=n.name.replace(o,""),this.buildBinding("Binding",e,c,n.value));return s||(c=e.nodeName.toLowerCase(),this.components[c]&&!e._bound&&(this.bindings.push(new t.ComponentBinding(this,e,c)),s=!0)),s},e.prototype.select=function(t){var e,n,r,i,o;for(o=[],n=0,r=(i=this.bindings).length;r>n;n++)e=i[n],t(e)&&o.push(e);return o},e.prototype.bind=function(){var t,e,n;for(t=0,e=(n=this.bindings).length;e>t;t++)n[t].bind()},e.prototype.unbind=function(){var t,e,n;for(t=0,e=(n=this.bindings).length;e>t;t++)n[t].unbind()},e.prototype.sync=function(){var t,e,n,r;for(e=0,n=(r=this.bindings).length;n>e;e++)"function"==typeof(t=r[e]).sync&&t.sync()},e.prototype.publish=function(){var t,e,n;for(t=0,e=(n=this.select(function(t){var e;return null!=(e=t.binder)?e.publishes:void 0})).length;e>t;t++)n[t].publish()},e.prototype.update=function(t){var e,n,r,i,o,s;null==t&&(t={});for(n in t)r=t[n],this.models[n]=r;for(i=0,o=(s=this.bindings).length;o>i;i++)"function"==typeof(e=s[i]).update&&e.update(t)},e}(),t.Binding=function(){function e(t,e,n,r,i){this.view=t,this.el=e,this.type=n,this.keypath=r,this.options=null!=i?i:{},this.getValue=o(this.getValue,this),this.update=o(this.update,this),this.unbind=o(this.unbind,this),this.bind=o(this.bind,this),this.publish=o(this.publish,this),this.sync=o(this.sync,this),this.set=o(this.set,this),this.eventHandler=o(this.eventHandler,this),this.formattedValue=o(this.formattedValue,this),this.parseFormatterArguments=o(this.parseFormatterArguments,this),this.parseTarget=o(this.parseTarget,this),this.observe=o(this.observe,this),this.setBinder=o(this.setBinder,this),this.formatters=this.options.formatters||[],this.dependencies=[],this.formatterObservers={},this.model=void 0,this.setBinder()}return e.prototype.setBinder=function(){var t,e,n;if(!(this.binder=this.view.binders[this.type])){n=this.view.binders;for(t in n)e=n[t],"*"!==t&&-1!==t.indexOf("*")&&new RegExp("^"+t.replace(/\*/g,".+")+"$").test(this.type)&&(this.binder=e,this.args=new RegExp("^"+t.replace(/\*/g,"(.+)")+"$").exec(this.type),this.args.shift())}return this.binder||(this.binder=this.view.binders["*"]),this.binder instanceof Function?this.binder={routine:this.binder}:void 0},e.prototype.observe=function(e,n,r){return t.sightglass(e,n,r,{root:this.view.rootInterface,adapters:this.view.adapters})},e.prototype.parseTarget=function(){var e;return(e=t.TypeParser.parse(this.keypath)).type===t.TypeParser.types.primitive?this.value=e.value:(this.observer=this.observe(this.view.models,this.keypath,this.sync),this.model=this.observer.target)},e.prototype.parseFormatterArguments=function(e,n){var r,i,o,s,a,c,l;for(s=[],r=c=0,l=(e=function(){var n,r,o;for(o=[],n=0,r=e.length;r>n;n++)i=e[n],o.push(t.TypeParser.parse(i));return o}()).length;l>c;r=++c)i=e[r],s.push(i.type===t.TypeParser.types.primitive?i.value:((a=this.formatterObservers)[n]||(a[n]={}),(o=this.formatterObservers[n][r])||(o=this.observe(this.view.models,i.value,this.sync),this.formatterObservers[n][r]=o),o.value()));return s},e.prototype.formattedValue=function(t){var e,n,r,i,o,a,c,l,u;for(n=a=0,c=(l=this.formatters).length;c>a;n=++a)r=l[n],e=r.match(/[^\s']+|'([^']|'[^\s])*'|"([^"]|"[^\s])*"/g),i=e.shift(),r=this.view.formatters[i],o=this.parseFormatterArguments(e,n),(null!=r?r.read:void 0)instanceof Function?t=(u=r.read).call.apply(u,[this.model,t].concat(s.call(o))):r instanceof Function&&(t=r.call.apply(r,[this.model,t].concat(s.call(o))));return t},e.prototype.eventHandler=function(t){var e,n;return n=(e=this).view.handler,function(r){return n.call(t,this,r,e)}},e.prototype.set=function(e){var n;return e=e instanceof Function&&!this.binder.function&&t.public.executeFunctions?this.formattedValue(e.call(this.model)):this.formattedValue(e),null!=(n=this.binder.routine)?n.call(this,this.el,e):void 0},e.prototype.sync=function(){var t,e;return this.set(function(){var n,r,i,o,s,a,c;if(this.observer){if(this.model!==this.observer.target){for(n=0,i=(s=this.dependencies).length;i>n;n++)(e=s[n]).unobserve();if(this.dependencies=[],null!=(this.model=this.observer.target)&&(null!=(a=this.options.dependencies)?a.length:void 0))for(c=this.options.dependencies,r=0,o=c.length;o>r;r++)t=c[r],e=this.observe(this.model,t,this.sync),this.dependencies.push(e)}return this.observer.value()}return this.value}.call(this))},e.prototype.publish=function(){var t,e,n,r,i,o,a,c,l,u,p,h,f;if(this.observer){for(c=this.getValue(this.el),o=this.formatters.length-1,n=l=0,u=(p=this.formatters.slice(0).reverse()).length;u>l;n=++l)r=p[n],e=o-n,t=r.split(/\s+/),i=t.shift(),a=this.parseFormatterArguments(t,e),(null!=(h=this.view.formatters[i])?h.publish:void 0)&&(c=(f=this.view.formatters[i]).publish.apply(f,[c].concat(s.call(a))));return this.observer.setValue(c)}},e.prototype.bind=function(){var t,e,n,r,i,o,s;if(this.parseTarget(),null!=(i=this.binder.bind)&&i.call(this,this.el),null!=this.model&&(null!=(o=this.options.dependencies)?o.length:void 0))for(s=this.options.dependencies,n=0,r=s.length;r>n;n++)t=s[n],e=this.observe(this.model,t,this.sync),this.dependencies.push(e);return this.view.preloadData?this.sync():void 0},e.prototype.unbind=function(){var t,e,n,r,i,o,s,a,c;for(null!=(o=this.binder.unbind)&&o.call(this,this.el),null!=(s=this.observer)&&s.unobserve(),r=0,i=(a=this.dependencies).length;i>r;r++)a[r].unobserve();this.dependencies=[],c=this.formatterObservers;for(n in c){e=c[n];for(t in e)e[t].unobserve()}return this.formatterObservers={}},e.prototype.update=function(t){var e,n;return null==t&&(t={}),this.model=null!=(e=this.observer)?e.target:void 0,null!=(n=this.binder.update)?n.call(this,t):void 0},e.prototype.getValue=function(e){return this.binder&&null!=this.binder.getValue?this.binder.getValue.call(this,e):t.Util.getInputValue(e)},e}(),t.ComponentBinding=function(e){function n(e,n,r){var i,s,a,c,u,p,h,f;for(this.view=e,this.el=n,this.type=r,this.unbind=o(this.unbind,this),this.bind=o(this.bind,this),this.locals=o(this.locals,this),this.component=this.view.components[this.type],this.static={},this.observers={},this.upstreamObservers={},s=e.bindingRegExp(),u=0,p=(h=this.el.attributes||[]).length;p>u;u++)i=h[u],s.test(i.name)||(a=this.camelCase(i.name),c=t.TypeParser.parse(i.value),l.call(null!=(f=this.component.static)?f:[],a)>=0?this.static[a]=i.value:c.type===t.TypeParser.types.primitive?this.static[a]=c.value:this.observers[a]=i.value)}return c(n,e),n.prototype.sync=function(){},n.prototype.update=function(){},n.prototype.publish=function(){},n.prototype.locals=function(){var t,e,n,r,i,o;n={},i=this.static;for(t in i)r=i[t],n[t]=r;o=this.observers;for(t in o)e=o[t],n[t]=e.value();return n},n.prototype.camelCase=function(t){return t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})},n.prototype.bind=function(){var e,n,r,i,o,s,a,c,l,u,p,h,f,d,m,g,v,y,b,_;if(!this.bound){d=this.observers;for(n in d)r=d[n],this.observers[n]=this.observe(this.view.models,r,function(t){return function(e){return function(){return t.componentView.models[e]=t.observers[e].value()}}}(this).call(this,n));this.bound=!0}if(null!=this.componentView)this.componentView.bind();else{for(this.el.innerHTML=this.component.template.call(this),a=this.component.initialize.call(this,this.el,this.locals()),this.el._bound=!0,s={},u=0,h=(m=t.extensions).length;h>u;u++){if(o=m[u],s[o]={},this.component[o]){g=this.component[o];for(e in g)c=g[e],s[o][e]=c}v=this.view[o];for(e in v)c=v[e],null==(l=s[o])[e]&&(l[e]=c)}for(p=0,f=(y=t.options).length;f>p;p++)o=y[p],s[o]=null!=(b=this.component[o])?b:this.view[o];this.componentView=new t.View(Array.prototype.slice.call(this.el.childNodes),a,s),this.componentView.bind(),_=this.observers;for(n in _)i=_[n],this.upstreamObservers[n]=this.observe(this.componentView.models,n,function(t){return function(e,n){return function(){return n.setValue(t.componentView.models[e])}}}(this).call(this,n,i))}},n.prototype.unbind=function(){var t,e,n,r;e=this.upstreamObservers;for(t in e)e[t].unobserve();n=this.observers;for(t in n)n[t].unobserve();return null!=(r=this.componentView)?r.unbind.call(this):void 0},n}(t.Binding),t.TextBinding=function(t){function e(t,e,n,r,i){this.view=t,this.el=e,this.type=n,this.keypath=r,this.options=null!=i?i:{},this.sync=o(this.sync,this),this.formatters=this.options.formatters||[],this.dependencies=[],this.formatterObservers={}}return c(e,t),e.prototype.binder={routine:function(t,e){return t.data=null!=e?e:""}},e.prototype.sync=function(){return e.__super__.sync.apply(this,arguments)},e}(t.Binding),t.public.binders.text=function(t,e){return null!=t.textContent?t.textContent=null!=e?e:"":t.innerText=null!=e?e:""},t.public.binders.html=function(t,e){return t.innerHTML=null!=e?e:""},t.public.binders.show=function(t,e){return t.style.display=e?"":"none"},t.public.binders.hide=function(t,e){return t.style.display=e?"none":""},t.public.binders.enabled=function(t,e){return t.disabled=!e},t.public.binders.disabled=function(t,e){return t.disabled=!!e},t.public.binders.checked={publishes:!0,priority:2e3,bind:function(e){return t.Util.bindEvent(e,"change",this.publish)},unbind:function(e){return t.Util.unbindEvent(e,"change",this.publish)},routine:function(t,e){var n;return t.checked="radio"===t.type?(null!=(n=t.value)?n.toString():void 0)===(null!=e?e.toString():void 0):!!e}},t.public.binders.unchecked={publishes:!0,priority:2e3,bind:function(e){return t.Util.bindEvent(e,"change",this.publish)},unbind:function(e){return t.Util.unbindEvent(e,"change",this.publish)},routine:function(t,e){var n;return t.checked="radio"===t.type?(null!=(n=t.value)?n.toString():void 0)!==(null!=e?e.toString():void 0):!e}},t.public.binders.value={publishes:!0,priority:3e3,bind:function(e){return"INPUT"!==e.tagName||"radio"!==e.type?(this.event="SELECT"===e.tagName?"change":"input",t.Util.bindEvent(e,this.event,this.publish)):void 0},unbind:function(e){return"INPUT"!==e.tagName||"radio"!==e.type?t.Util.unbindEvent(e,this.event,this.publish):void 0},routine:function(t,e){var r,i,o,s,a,c,u;if("INPUT"===t.tagName&&"radio"===t.type)return t.setAttribute("value",e);if(null!=window.jQuery){if(t=n(t),(null!=e?e.toString():void 0)!==(null!=(s=t.val())?s.toString():void 0))return t.val(null!=e?e:"")}else if("select-multiple"===t.type){if(null!=e){for(u=[],i=0,o=t.length;o>i;i++)r=t[i],u.push(r.selected=(a=r.value,l.call(e,a)>=0));return u}}else if((null!=e?e.toString():void 0)!==(null!=(c=t.value)?c.toString():void 0))return t.value=null!=e?e:""}},t.public.binders.if={block:!0,priority:4e3,bind:function(t){var e,n;return null==this.marker?(e=[this.view.prefix,this.type].join("-").replace("--","-"),n=t.getAttribute(e),this.marker=document.createComment(" rivets: "+this.type+" "+n+" "),this.bound=!1,t.removeAttribute(e),t.parentNode.insertBefore(this.marker,t),t.parentNode.removeChild(t)):void 0},unbind:function(){return this.nested?(this.nested.unbind(),this.bound=!1):void 0},routine:function(e,n){var r,i,o,s;if(!!n==!this.bound){if(n){o={},s=this.view.models;for(r in s)i=s[r],o[r]=i;return(this.nested||(this.nested=new t.View(e,o,this.view.options()))).bind(),this.marker.parentNode.insertBefore(e,this.marker.nextSibling),this.bound=!0}return e.parentNode.removeChild(e),this.nested.unbind(),this.bound=!1}},update:function(t){var e;return null!=(e=this.nested)?e.update(t):void 0}},t.public.binders.unless={block:!0,priority:4e3,bind:function(e){return t.public.binders.if.bind.call(this,e)},unbind:function(){return t.public.binders.if.unbind.call(this)},routine:function(e,n){return t.public.binders.if.routine.call(this,e,!n)},update:function(e){return t.public.binders.if.update.call(this,e)}},t.public.binders["on-*"]={function:!0,priority:1e3,unbind:function(e){return this.handler?t.Util.unbindEvent(e,this.args[0],this.handler):void 0},routine:function(e,n){return this.handler&&t.Util.unbindEvent(e,this.args[0],this.handler),t.Util.bindEvent(e,this.args[0],this.handler=this.eventHandler(n))}},t.public.binders["each-*"]={block:!0,priority:4e3,bind:function(t){var e,n,r,i;if(null==this.marker)e=[this.view.prefix,this.type].join("-").replace("--","-"),this.marker=document.createComment(" rivets: "+this.type+" "),this.iterated=[],t.removeAttribute(e),t.parentNode.insertBefore(this.marker,t),t.parentNode.removeChild(t);else for(i=this.iterated,n=0,r=i.length;r>n;n++)i[n].bind()},unbind:function(){var t,e,n;if(null!=this.iterated)for(n=this.iterated,t=0,e=n.length;e>t;t++)n[t].unbind()},routine:function(e,n){var r,i,o,s,a,c,l,u,p,h,f,d,m,g,v,y,b,_,w;if(c=this.args[0],n=n||[],this.iterated.length>n.length)for(b=Array(this.iterated.length-n.length),f=0,g=b.length;g>f;f++)b[f],(h=this.iterated.pop()).unbind(),this.marker.parentNode.removeChild(h.els[0]);for(o=d=0,v=n.length;v>d;o=++d)if(a=n[o],i={index:o},i[t.public.iterationAlias(c)]=o,i[c]=a,null==this.iterated[o]){_=this.view.models;for(s in _)a=_[s],null==i[s]&&(i[s]=a);u=this.iterated.length?this.iterated[this.iterated.length-1].els[0]:this.marker,(l=this.view.options()).preloadData=!0,p=e.cloneNode(!0),(h=new t.View(p,i,l)).bind(),this.iterated.push(h),this.marker.parentNode.insertBefore(p,u.nextSibling)}else this.iterated[o].models[c]!==a&&this.iterated[o].update(i);if("OPTION"===e.nodeName)for(w=this.view.bindings,m=0,y=w.length;y>m;m++)(r=w[m]).el===this.marker.parentNode&&"value"===r.type&&r.sync()},update:function(t){var e,n,r,i,o,s;e={};for(n in t)r=t[n],n!==this.args[0]&&(e[n]=r);for(i=0,o=(s=this.iterated).length;o>i;i++)s[i].update(e)}},t.public.binders["class-*"]=function(t,e){var n;return n=" "+t.className+" ",!e==(-1!==n.indexOf(" "+this.args[0]+" "))?t.className=e?t.className+" "+this.args[0]:n.replace(" "+this.args[0]+" "," ").trim():void 0},t.public.binders["*"]=function(t,e){return null!=e?t.setAttribute(this.type,e):t.removeAttribute(this.type)},t.public.formatters.call=function(){var t,e;return e=arguments[0],t=2<=arguments.length?s.call(arguments,1):[],e.call.apply(e,[this].concat(s.call(t)))},t.public.adapters["."]={id:"_rv",counter:0,weakmap:{},weakReference:function(t){var e,n,r;return t.hasOwnProperty(this.id)||(e=this.counter++,Object.defineProperty(t,this.id,{value:e})),(n=this.weakmap)[r=t[this.id]]||(n[r]={callbacks:{}})},cleanupWeakReference:function(t,e){return Object.keys(t.callbacks).length||t.pointers&&Object.keys(t.pointers).length?void 0:delete this.weakmap[e]},stubFunction:function(t,e){var n,r,i;return r=t[e],n=this.weakReference(t),i=this.weakmap,t[e]=function(){var e,o,s,a,c,l,u,p,h;s=r.apply(t,arguments),l=n.pointers;for(o in l)for(e=l[o],h=null!=(u=null!=(p=i[o])?p.callbacks[e]:void 0)?u:[],a=0,c=h.length;c>a;a++)(0,h[a])();return s}},observeMutations:function(t,e,n){var r,i,o,s,a,c;if(Array.isArray(t)){if(null==(o=this.weakReference(t)).pointers)for(o.pointers={},i=["push","pop","shift","unshift","sort","reverse","splice"],a=0,c=i.length;c>a;a++)r=i[a],this.stubFunction(t,r);if(null==(s=o.pointers)[e]&&(s[e]=[]),l.call(o.pointers[e],n)<0)return o.pointers[e].push(n)}},unobserveMutations:function(t,e,n){var r,i,o;return Array.isArray(t)&&null!=t[this.id]&&(i=this.weakmap[t[this.id]])&&(o=i.pointers[e])?((r=o.indexOf(n))>=0&&o.splice(r,1),o.length||delete i.pointers[e],this.cleanupWeakReference(i,t[this.id])):void 0},observe:function(t,e,n){var r,i,o;return null==(r=this.weakReference(t).callbacks)[e]&&(r[e]=[],(null!=(i=Object.getOwnPropertyDescriptor(t,e))?i.get:void 0)||(null!=i?i.set:void 0)||(o=t[e],Object.defineProperty(t,e,{enumerable:!0,get:function(){return o},set:function(n){return function(i){var s,a,c,u,p;if(i!==o&&(n.unobserveMutations(o,t[n.id],e),o=i,a=n.weakmap[t[n.id]])){if((r=a.callbacks)[e])for(p=r[e].slice(),c=0,u=p.length;u>c;c++)s=p[c],l.call(r[e],s)>=0&&s();return n.observeMutations(i,t[n.id],e)}}}(this)}))),l.call(r[e],n)<0&&r[e].push(n),this.observeMutations(t[e],t[this.id],e)},unobserve:function(t,e,n){var r,i,o;return(o=this.weakmap[t[this.id]])&&(r=o.callbacks[e])?((i=r.indexOf(n))>=0&&(r.splice(i,1),r.length||(delete o.callbacks[e],this.unobserveMutations(t[e],t[this.id],e))),this.cleanupWeakReference(o,t[this.id])):void 0},get:function(t,e){return t[e]},set:function(t,e,n){return t[e]=n}},t.factory=function(e){return t.sightglass=e,t.public._=t,t.public},"object"==typeof("undefined"!=typeof module&&null!==module?module.exports:void 0)?module.exports=t.factory(require("sightglass")):"function"==typeof define&&define.amd?define(["sightglass"],function(e){return this.rivets=t.factory(e)}):this.rivets=t.factory(sightglass)}.call(this),function(){"use strict";function t(){function t(t,e){var n,i=[],o=!1,s=e.cd,a=e.callback;if(e.filterConf.args.length){var c=[];e.filterConf.args.forEach(function(t,e){var n=s.watch(t,function(t){i[e+1]=t,u()});n.$.isStatic||c.push(n)});var l=!1,u=function(){l||(l=!0,s.watch("$onScanOnce",function(){if(l=!1,o){var e=t.apply(null,i);r.isPromise(e)?e.then(function(t){a(t),s.scan()}):a(e)}}))};c.length&&(n=function(){c.forEach(function(t){return t.stop()})})}else u=function(){var e=t(i[0]);r.isPromise(e)?e.then(function(t){a(t),s.scan()}):a(e)};return{onChange:function(t){o=!0,i[0]=t,u()},onStop:n,watchMode:e.watchMode}}function e(t,e,n,r){r.setValue(r.attrArgument,e)}var n=function(t,e){return n.bootstrap(t,e)};n.version="0.14.0",n.filters={},n.text={},n.core={},n.utils={},n.option={globalController:!1,removeAttribute:!0,domOptimization:!0,domOptimizationRemoveEmpty:!0,fastBinding:!0},n.debug={scan:0,directive:!1,watch:!1,watchText:!1,parser:!1},n.ctrl=n.controllers={},n.d=n.directives={al:{},bo:{},$global:{}},n.hooks={directive:[],binding:[]},n.priority={al:{app:2e3,checked:20,class:30,css:30,focused:20,if:700,ifnot:700,model:25,radio:25,repeat:1e3,select:20,stop:-10,value:20,on:10},$component:5,$attribute:-5};var r=n.f$={},i=function(t,e){var n=t.indexOf(e);n>=0?t.splice(n,1):console.warn("trying to remove not exist item")};r.before=function(t,e){t.parentNode.insertBefore(e,t)},r.after=function(t,e){var n=t.parentNode,r=t.nextSibling;r?n.insertBefore(e,r):n.appendChild(e)},r.remove=function(t){var e=t.parentNode;e&&e.removeChild(t)},r.on=function(t,e,n){t.addEventListener(e,n,!1)},r.off=function(t,e,n){t.removeEventListener(e,n,!1)},r.isFunction=function(t){return t&&"[object Function]"===Object.prototype.toString.call(t)},r.isObject=function(t){return t&&"[object Object]"===Object.prototype.toString.call(t)},r.isPromise=function(t){return t&&window.Promise&&t instanceof window.Promise},r.isElement=function(t){return t instanceof HTMLElement},r.addClass=function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},r.removeClass=function(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi")," ")},r.rawAjax=function(t){var e=new XMLHttpRequest;e.open(t.type||"GET",t.url,!0,t.username,t.password);for(var n in t.headers)e.setRequestHeader(n,t.headers[n]);t.success&&(e.onload=function(){e.status>=200&&e.status<400?t.success(e.responseText):t.error&&t.error()}),t.error&&(e.onerror=t.error),e.send(t.data||null)},r.ajaxCache={},r.ajax=function(t){if(t.username||t.password||t.headers||t.data||!t.cache)return r.rawAjax(t);var e=t.type||"GET",n=e+":"+t.url,i=r.ajaxCache[n];i||(r.ajaxCache[n]=i={callback:[]}),i.result?t.success&&t.success(i.result):(i.callback.push(t),i.loading||(i.loading=!0,r.rawAjax({type:e,url:t.url,success:function(t){i.loading=!1,i.result=t;for(var e=0;e<i.callback.length;e++)i.callback[e].success&&i.callback[e].success(t);i.callback.length=0},error:function(){i.loading=!1;for(var t=0;t<i.callback.length;t++)i.callback[t].error&&i.callback[t].error();i.callback.length=0}})))},function(){var t='@charset "UTF-8";[al-cloak],[hidden],.al-hide{display:none !important;}',e=document.querySelectorAll("head")[0],n=document.createElement("style");n.setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),e.appendChild(n)}(),r.ready=function(){function t(){n=!0,r.off(document,"DOMContentLoaded",t);for(var i=0;i<e.length;i++)e[i]();e.length=0}var e=[],n=!1;return r.on(document,"DOMContentLoaded",t),function(t){n?t():e.push(t)}}(),window.jQuery&&(window.jQuery.fn.alight=function(t){var e=[];if(this.each(function(t,n){return e.push(n)}),e.length)return n(e,t)}),n.core.getFilter=function(t,e){var i=e.locals[t];if(i&&(r.isFunction(i)||i.init||i.fn))return i;if(i=n.filters[t])return i;throw"Filter not found: "+t},n.core.buildFilterNode=function(e,n,i,o){if(r.isFunction(i))return t(i,{cd:e,filterConf:n,callback:o});if(i.init)return i.init.call(e,e.scope,n.raw,{setValue:o,conf:n,changeDetector:e});if(r.isFunction(i.fn))return t(i.fn,{cd:e,filterConf:n,callback:o,watchMode:i.watchMode});throw"Wrong filter: "+n.name};var o,s,a,c,l,u,p,h,f,d,m,g;n.ChangeDetector=function(t){var e,n;return n=new a,e=new o(n,t||{}),n.topCD=e,e},(a=function(){return this.watchers={any:[],finishBinding:[],finishScan:[],finishScanOnce:[],onScanOnce:[]},this.status=null,this.extraLoop=!1,this.finishBinding_lock=!1,this.lateScan=!1,this.topCD=null,this}).prototype.destroy=function(){if(this.watchers.any.length=0,this.watchers.finishBinding.length=0,this.watchers.finishScan.length=0,this.watchers.finishScanOnce.length=0,this.watchers.onScanOnce.length=0,this.topCD)return this.topCD.destroy()},(o=function(t,e){this.scope=e,this.locals=e,this.root=t,this.watchList=[],this.destroy_callbacks=[],this.parent=null,this.children=[],this.rwatchers={any:[],finishScan:[],elEvents:[]}}).prototype.new=function(t,e){var n,r,i;return e=e||{},i=this,null==t&&(t=i.scope),r=new o(i.root,t),r.parent=i,t===i.scope&&(e.locals?((n=i._ChildLocals)||(i._ChildLocals=n=function(){return this.$$root=t,this},n.prototype=i.locals),r.locals=new n):r.locals=i.locals),i.children.push(r),r},o.prototype.destroy=function(){var t,e,n,o,s,a,c,l,u,p,h,f,d,m,g,v,y,b,_,w,x,k,A;for(k=(t=this).root,t.scope=null,t.parent&&i(t.parent.children,t),o=0,c=(v=t.destroy_callbacks).length;o<c;o++)(0,v[o])();for(s=0,l=(y=t.children.slice()).length;s<l;s++)y[s].destroy();for(t.destroy_callbacks.length=0,a=0,u=(b=t.watchList).length;a<u;a++)(e=b[a]).onStop&&e.onStop();for(t.watchList.length=0,d=0,p=(_=t.rwatchers.any).length;d<p;d++)A=_[d],i(k.watchers.any,A);for(t.rwatchers.any.length=0,m=0,h=(w=t.rwatchers.finishScan).length;m<h;m++)A=w[m],i(k.watchers.finishScan,A);for(t.rwatchers.finishScan.length=0,g=0,f=(x=this.rwatchers.elEvents).length;g<f;g++)n=x[g],r.off(n[0],n[1],n[2]);this.rwatchers.elEvents.length=0,k.topCD===t&&(k.topCD=null,k.destroy())},c=function(t){return this.cb=t},m=function(t,e,n){var r,o;return r=t.root,o=new c(n),t.rwatchers[e].push(o),r.watchers[e].push(o),{stop:function(){return i(t.rwatchers[e],o),i(r.watchers[e],o)}}},o.prototype.on=function(t,e,n){return r.on(t,e,n),this.rwatchers.elEvents.push([t,e,n])},h={$any:function(t,e){return m(t,"any",e)},$finishScan:function(t,e){return m(t,"finishScan",e)},$finishScanOnce:function(t,e){t.root.watchers.finishScanOnce.push(e)},$onScanOnce:function(t,e){t.root.watchers.onScanOnce.push(e)},$destroy:function(t,e){t.destroy_callbacks.push(e)},$finishBinding:function(t,e){t.root.watchers.finishBinding.push(e)}},g=function(){},o.prototype.watch=function(t,e,o){var s,a,c,l,p,f,d,m,v,y;if(p=h[t])return p(this,e);if(!0===(o=o||{})&&(o={isArray:!0}),o.init&&console.warn("watch.init is depricated"),s=this,s.root,y=s.scope,r.isFunction(t)?(l=t,m=n.utils.getId(),f=!0):(f=!1,l=null,"::"===(t=t.trim()).slice(0,2)&&(t=t.slice(2),o.oneTime=!0),m=t,m=o.deep?"d#"+m:o.isArray?"a#"+m:"v#"+m),n.debug.watch&&console.log("$watch",t),d=!1,!f)if(o.watchText)l=o.watchText.fn;else{if((a=n.utils.compile.expression(t)).filter)return function(t,e,r,i){var o=null,s=i.oneTime;if(i.isArray?o="array":i.deep&&(o="deep"),!r){var a={el:i.element,ea:i.elementAttr};r=function(e){u(t.scope,a,e)}}for(var c=n.utils.parsFilter(e.filter),l=[],p=c.result.length-1;p>=0;p--){var h=n.core.getFilter(c.result[p].name,t),f=n.core.buildFilterNode(t,c.result[p],h,r);f.watchMode&&(o=f.watchMode),f.onStop&&l.push(f.onStop),r=f.onChange}return i={oneTime:s},"array"===o?i.isArray=!0:"deep"===o&&(i.deep=!0),l.length&&(i.onStop=function(){l.forEach(function(t){return t()}),l.length=0}),t.watch(e.expression,r,i)}(s,a,e,o);d=a.isSimple&&0===a.simpleVariables.length,l=a.fn}return o.deep&&(o.isArray=!1),c={isStatic:d,isArray:Boolean(o.isArray),extraLoop:!o.readOnly,deep:!0===o.deep?10:o.deep,value:g,callback:e,exp:l,src:""+t,onStop:o.onStop||null,el:o.element||null,ea:o.elementAttr||null},d?s.watch("$onScanOnce",function(){return u(y,c,c.exp(y))}):s.watchList.push(c),v={$:c,stop:function(){var e;if(o.onStop)try{o.onStop()}catch(r){e=r,n.exceptionHandler(e,"Error in onStop of watcher: "+t,t)}if(!c.isStatic)return i(s.watchList,c)},refresh:function(){var t;return(t=c.exp(s.locals))&&c.deep?c.value=n.utils.clone(t,c.deep):t&&c.isArray?c.value=t.slice():c.value=t}},o.oneTime&&(c.callback=function(t){if(void 0!==t)return v.stop(),e(t)}),v},o.prototype.watchGroup=function(t,e){var n,i,o,s,a,c;if(n=this,!e&&r.isFunction(t)&&(e=t,t=null),c=!1,i=function(){if(!c)return c=!0,n.watch("$onScanOnce",function(){return c=!1,e()})},t)for(o=0,a=t.length;o<a;o++)s=t[o],n.watch(s,i);return i},p=window.performance?function(){return Math.floor(performance.now())}:function(){return(new Date).getTime()},f=function(t,e){var n,r,i,o,s;if(null===t||null===e)return!0;if(o=typeof t,s=typeof e,o!==s)return!0;if("object"===o){if(t.length!==e.length)return!0;for(n=r=0,i=t.length;r<i;n=++r)if(t[n]!==e[n])return!0}return!1},u=function(t,e,n){e.el?e.ea?e.el.setAttribute(e.ea,n):e.el.nodeValue=n:e.callback.call(t,n)},l=function(t,e,r,i){var o,s;return o={src:r.src,scope:e.scope,locals:e.locals},r.el&&(o.element=r.el),s=1===i?"$scan, error in callback: ":"$scan, error in expression: ",n.exceptionHandler(t,s+r.src,o)},s=function(){},d=function(t,e){var r,i,o,a,c,u,p,h,d,m,v,y,b,_,w,x,k;if(t.root,u=!1,a=0,w=0,t){for(b=[],p=0,o=t;o;){for(v=o.locals,w+=o.watchList.length,h=0,m=(_=o.watchList.slice()).length;h<m;h++){d=(k=_[h]).value;try{x=k.exp(v)}catch(t){c=t,x=s}if(d!==x){if(y=!1,k.isArray?(r=Array.isArray(d))===(i=Array.isArray(x))?r?f(d,x)&&(y=!0,k.value=x.slice()):(y=!0,k.value=x):(y=!0,k.value=i?x.slice():x):k.deep?n.utils.equal(d,x,k.deep)||(y=!0,k.value=n.utils.clone(x,k.deep)):(y=!0,k.value=x),y)if(y=!1,x===s)l(c,o,k);else{a++;try{k.el?k.ea?null!=x?k.el.setAttribute(k.ea,x):k.el.removeAttribute(k.ea):k.el.nodeValue=x:(d===g&&(d=void 0),"$scanNoChanges"!==k.callback.call(o.scope,x,d)&&k.extraLoop&&(u=!0))}catch(t){l(c=t,o,k,1)}}n.debug.scan>1&&console.log("changed:",k.src)}}b.push.apply(b,o.children),o=b[p++]}e.total=w,e.changes=a,e.extraLoop=u}},o.prototype.digest=function(){var t,e,r,i,o,s,a,c,l;for(a=this.root,i=10,l=0,n.debug.scan&&(c=p()),s={total:0,changes:0,extraLoop:!1,src:"",scope:null,element:null};i;){if(i--,a.extraLoop=!1,a.watchers.onScanOnce.length)for(o=a.watchers.onScanOnce.slice(),a.watchers.onScanOnce.length=0,e=0,r=o.length;e<r;e++)o[e].call(a);if(d(this,s),l+=s.changes,!s.extraLoop&&!a.extraLoop&&!a.watchers.onScanOnce.length)break}return n.debug.scan&&(t=p()-c,console.log("$scan: loops: ("+(10-i)+"), last-loop changes: "+s.changes+", watches: "+s.total+" / "+t+"ms")),s.mainLoop=i,s.totalChanges=l,s},o.prototype.scan=function(t){var e,i,o,s,a,c,l,u,p,h,f;if(f=this.root,t=t||{},!n.option.zone||t.zone){if(r.isFunction(t)&&(t={callback:t}),t.callback&&f.watchers.finishScanOnce.push(t.callback),t.late){if(f.lateScan)return;return f.lateScan=!0,void n.nextTick(function(){if(f.lateScan)return f.topCD.scan()})}if("scaning"!==f.status){if(f.lateScan=!1,f.status="scaning",(h=f.topCD?f.topCD.digest():{}).totalChanges)for(i=0,a=(u=f.watchers.any).length;i<a;i++)(0,u[i])();for(f.status=null,o=0,c=(p=f.watchers.finishScan).length;o<c;o++)(0,p[o])();for(e=f.watchers.finishScanOnce.slice(),f.watchers.finishScanOnce.length=0,s=0,l=e.length;s<l;s++)e[s].call(f);if(0===h.mainLoop)throw"Infinity loop detected";return h}f.extraLoop=!0}},n.core.ChangeDetector=o,o.prototype.compile=function(t,e){return n.utils.compile.expression(t,e).fn},o.prototype.setValue=function(t,e){var r,i,o,s,a,c,l,u,p,h;o=(r=this).compile(t+" = $value",{input:["$value"],no_return:!0});try{return o(r.locals,e)}catch(f){if(i=f,u="can't set variable: "+t,n.debug.parser&&console.warn(u),(""+i).indexOf("TypeError")>=0&&(h=t.match(/^([\w\d\.]+)\.[\w\d]+$/))&&h[1]){for(l=r.locals,s=0,c=(p=h[1].split(".")).length;s<c;s++)void 0===l[a=p[s]]&&(l[a]={}),l=l[a];try{return void o(r.locals,e)}catch(t){}}return n.exceptionHandler(i,u,{name:t,value:e})}},o.prototype.eval=function(t){return this.compile(t)(this.locals)},o.prototype.getValue=function(t){return this.eval(t)},function(){var t;n.text.$base=function(t){var e,r,i,o,s;if(o=t.point,e=t.cd,s=e.scope,!(r=s.$ns&&s.$ns.text?s.$ns.text[t.name]:n.text[t.name]))throw"No directive alight.text."+t.name;return i={changeDetector:e,setter:function(e){if(t.update)return o.value=null===e?"":""+e,t.update()},setterRaw:function(e){if(t.updateRaw)return o.value=null===e?"":""+e,t.updateRaw()},finally:function(e){if(t.finally)return o.value=null===e?"":""+e,o.type="text",t.finally(),t.update=null,t.finally=null}},r.call(e,i.setter,t.exp,s,i)},t=function(t,e,r){var i,o,s,a,c,l,p,h,f,d,m,g,v,y,b,_,w,x,k,A,C,B,S,T,E,D,N,O,$;if(r=r||{},o=this,n.debug.watchText&&console.log("$watchText",t),T=n.utils.compile.buildSimpleText(t,null))o.watch(t,e,{watchText:T,element:r.element,elementAttr:r.elementAttr});else{for(c=n.utils.parsText(t),O=0,i=!0,C=!1,p=h=l=function(){},v=0,_=c.length;v<_;v++)if("expression"===(a=c[v]).type)if(f=a.list.join("|"),k=f.match(/^([^\w\d\s\$"'\(\u0410-\u044F\u0401\u0451]+)/))a.isDir=!0,"#"===(A=k[1])?(g=f.indexOf(" "))<0?(A=f.substring(1),f=""):(A=f.slice(1,g),f=f.slice(g)):f=f.substring(A.length),n.text.$base({name:A,exp:f,cd:o,point:a,update:function(){return p()},updateRaw:function(){return h()},finally:function(){return p(),l()}}),C=!0,"text"!==a.type&&(i=!1);else if((s=n.utils.compile.expression(f,{string:!0})).filter)O++,i=!1,a.watched=!0,function(t){o.watch(f,function(e){return null==e&&(e=""),t.value=e,p()})}(a);else{if(a.fn=s.fn,!s.rawExpression)throw"Error";s.isSimple&&0===s.simpleVariables.length?(a.type="text",a.value=a.fn()):(a.re=s.rawExpression,O++)}if(i){if(!O){for(D="",y=0,w=c.length;y<w;y++)a=c[y],D+=a.value;return void o.watch("$onScanOnce",function(){return u(o.scope,{callback:e,el:r.element,ea:r.elementAttr},D)})}return T=C?n.utils.compile.buildSimpleText(null,c):n.utils.compile.buildSimpleText(t,c),void o.watch(t,e,{watchText:{fn:T.fn},element:r.element,elementAttr:r.elementAttr})}if($={callback:e,el:r.element,ea:r.elementAttr},c.scope=o.scope,m=n.utils.compile.buildText(t,c),h=function(){return u(o.scope,$,m())},O){for(N=null,S="",p=function(){S=m()},l=function(){var t,e;for(g=!0,t=0,e=c.length;t<e;t++)if("expression"===(a=c[t]).type){g=!1;break}g&&(o.watch("$finishScanOnce",function(){return N.stop()}),r.onStatic&&r.onStatic())},B=function(){return S},b=0,x=c.length;b<x;b++)if("expression"===(a=c[b]).type){if(a.isDir||a.watched)continue;a.watched=!0,function(t,e){o.watch(e,function(e){return null==e&&(e=""),t.value=e,p()})}(a,a.list.join(" | "))}p(),N=o.watch(B,e,{element:r.element,elementAttr:r.elementAttr})}else E=!1,d=function(){return E=!1,h()},(p=function(){if(!E)return E=!0,o.watch("$onScanOnce",d)})()}},o.prototype.watchText=t}();var v;v={TR:1,TD:1,LI:1},n.utils.optmizeElement=function(t,e){var i,o,s,a,c,l,u,p,h,f,d,m,g,y,b,_,w,x,k;if(1===t.nodeType){for(e=e||!n.option.domOptimizationRemoveEmpty,"PRE"===t.nodeName&&(e=!0),!(a=t.firstChild)||3!==a.nodeType||a.nodeValue.trim()||e||(r.remove(a),a=t.firstChild),b=!1;a;)g=a.nextSibling,!b||3!==a.nodeType||a.nodeValue.trim()||e?(b=1===a.nodeType&&v[a.nodeName],n.utils.optmizeElement(a,e)):r.remove(a),a=g;!(a=t.lastChild)||3!==a.nodeType||a.nodeValue.trim()||e||r.remove(a)}else if(3===t.nodeType){if(x=t.data,d=n.utils.pars_start_tag,(l=x.indexOf(d))<0)return;if(x.slice(l+d.length).indexOf(d)<0)return;for(y="t",w=[i={value:""}],u=0,h=(s=n.utils.parsText(x)).length;u<h;u++)"text"===(o=s[u]).type?i.value+=o.value:(c=o.list.join("|"),k=n.utils.pars_start_tag+c+n.utils.pars_finish_tag,c.match(/^([^\w\d\s\$"'\(\u0410-\u044F\u0401\u0451]+)/)?("t"===y||"d"===y?i.value+=k:(i={value:k},w.push(i)),y="d"):1===o.list.length?("t"===y||"v"===y?i.value+=k:(i={value:k},w.push(i)),y="v"):"t"===y?i.value+=k:(i={value:k},w.push(i)));if(w.length<2)return;for((a=t).data=w[0].value,p=0,f=(_=w.slice(1)).length;p<f;p++)o=_[p],m=document.createTextNode(o.value),r.after(a,m),a=m}};var y,b,_,w,x,k,A,C;!function(){var t;n.hooks.attribute=t=[],t.push({code:"dataPrefix",fn:function(){"data-"===this.attrName.slice(0,5)&&(this.attrName=this.attrName.slice(5))}}),t.push({code:"colonNameSpace",fn:function(){var t,e;this.directive||this.name||((e=this.attrName.match(/^(\w+)[\-\:](.+)$/))?(this.ns=e[1],t=e[2]):(this.ns="$global",t=this.attrName),(e=t.match(/^([^\.]+)\.(.*)$/))&&(t=e[1],this.attrArgument=e[2]),this.name=t.replace(/(-\w)/g,function(t){return t.substring(1).toUpperCase()}))}}),t.push({code:"getGlobalDirective",fn:function(){var t;if(!this.directive){if(!(t=n.d[this.ns]))return this.result="noNS",void(this.stop=!0);this.directive=t[this.name],this.directive||("$global"===this.ns?this.result="noNS":this.result="noDirective",this.stop=!0)}}}),t.push({code:"cloneDirective",fn:function(){var t,e,i,o,s,a;if(s=this.directive,o=this.ns,i=this.name,t={},r.isFunction(s))t.init=s;else{if(!r.isObject(s))throw"Wrong directive: "+o+"."+i;for(e in s)a=s[e],t[e]=a}if(t.priority=s.priority||n.priority[o]&&n.priority[o][i]||0,t.restrict=s.restrict||"A",t.restrict.indexOf(this.attrType)<0)throw"Directive has wrong binding (attribute/element): "+i;this.directive=t}}),t.push({code:"preprocessor",fn:function(){var t,e,r;r=this.ns,e=this.name,(t=this.directive).$init=function(i,o,s,a){var c,l;if(c=function(){var t,e,n,r;for(t=e=0,r=(n=l.procLine).length;e<r;t=++e)if(n[t].fn.call(l),l.isDeferred){l.procLine=n.slice(t+1);break}return l.async=!0,null},l={element:o,value:s,cd:i,env:a,ns:r,name:e,doBinding:!1,directive:t,isDeferred:!1,procLine:n.hooks.directive,makeDeferred:function(){return l.isDeferred=!0,l.doBinding=!0,l.retStopBinding=!0,l.async=!1,function(){if(l.isDeferred=!1,l.async)return c()}}},t.stopBinding&&(a.stopBinding=!0),c(),l.retStopBinding)return"stopBinding"}}})}(),function(){var t;(t=n.hooks.directive).push({code:"init",fn:function(){var t;this.directive.init&&(n.debug.directive&&this.directive.scope&&console.warn(this.ns+"-"+this.name+" uses scope and init together, probably you need use link instead of init"),this.env.changeDetector=this.cd,(t=this.directive.init.call(this.env,this.cd.scope,this.element,this.value,this.env))&&t.start&&t.start())}}),t.push({code:"templateUrl",fn:function(){var t,e;e=this,this.directive.templateUrl&&(t=this.makeDeferred(),r.ajax({cache:!0,url:this.directive.templateUrl,success:function(n){return e.directive.template=n,t()},error:t}))}}),t.push({code:"template",fn:function(){var t;this.directive.template&&(1===this.element.nodeType?this.element.innerHTML=this.directive.template:8===this.element.nodeType&&((t=document.createElement("p")).innerHTML=this.directive.template.trim(),t=t.firstChild,r.after(this.element,t),this.element=t,this.doBinding=!0))}}),t.push({code:"scope",fn:function(){var t,e;if(this.directive.scope){switch(e=this.cd,this.directive.scope){case!0:t=e.new({$parent:e.scope});break;case"root":t=n.ChangeDetector({$parent:e.scope}),e.watch("$destroy",function(){return t.destroy()});break;default:throw"Wrong scope value: "+this.directive.scope}this.env.parentChangeDetector=e,this.cd=t,this.doBinding=!0,this.retStopBinding=!0}}}),t.push({code:"link",fn:function(){var t;this.directive.link&&(this.env.changeDetector=this.cd,(t=this.directive.link.call(this.env,this.cd.scope,this.element,this.value,this.env))&&t.start&&t.start())}}),t.push({code:"scopeBinding",fn:function(){this.doBinding&&!this.env.stopBinding&&n.bind(this.cd,this.element,{skip_attr:this.env.skippedAttr()})}})}(),C=function(){var t;return t=function(t,e,r){var i;"A"===e.attr_type?((i=r||{}).priority=n.priority.$attribute,i.is_attr=!0,i.name=t,i.attrName=t,i.element=e.element,e.list.push(i)):"M"===e.attr_type&&e.list.push(r)},function(e,r){var i,o,s,a;if(r.skip_attr.indexOf(e)>=0)return t(e,r,{skip:!0});for(i={attrName:e,attrType:r.attr_type,element:r.element,cd:r.cd,result:null},o=0,s=(a=n.hooks.attribute).length;o<s&&(a[o].fn.call(i),!i.stop);o++);if("noNS"!==i.result)return"noDirective"===i.result?"E"===r.attr_type?void r.list.push({name:e,priority:-10,attrName:e,noDirective:!0}):void t(e,r,{noDirective:!0}):void r.list.push({name:e,directive:i.directive,priority:i.directive.priority,attrName:e,attrArgument:i.attrArgument});t(e,r)}}(),A=function(t,e){return t.priority===e.priority?0:t.priority>e.priority?-1:1},b=function(t,e,r,i){var o;if(!((o=r).indexOf(n.utils.pars_start_tag)<0))return t.watchText(o,null,{element:e,elementAttr:i}),!0},k=function(t,e,r){var i;if(!((i=e.data).indexOf(n.utils.pars_start_tag)<0))return t.watchText(i,null,{element:e}),i},_=function(t,e,r){var i,o,s,a,c,l,u,p,h,f;if("directive:"===(h=e.nodeValue.trim()).slice(0,10)){if(h=h.slice(10).trim(),(u=h.indexOf(" "))>=0?(s=h.slice(0,+(u-1)+1||9e9),f=h.slice(u+1)):(s=h,f=""),i={list:p=[],element:e,attr_type:"M",cd:t,skip_attr:[]},C(s,i),(o=p[0]).noDirective)throw"Comment directive not found: "+s;a=o.directive,l=new y({element:e,attrName:o.attrName,attributes:p}),n.debug.directive&&console.log("bind",o.attrName,f,o);try{a.$init(t,e,f,l)}catch(r){c=r,n.exceptionHandler(c,"Error in directive: "+o.name,{value:f,env:l,cd:t,scope:t.scope,element:e})}return l.skipToElement?{directive:1,skipToElement:l.skipToElement}:{directive:1,skipToElement:null}}},(y=function(t){var e,n;for(e in t)n=t[e],this[e]=n;return this}).prototype.takeAttr=function(t,e){var n,r,i,o;for(1===arguments.length&&(e=!0),r=0,i=(o=this.attributes).length;r<i;r++)if((n=o[r]).attrName===t)return e&&(n.skip=!0),this.element.getAttribute(t)||!0},y.prototype.skippedAttr=function(){var t,e,n,r,i;for(i=[],e=0,n=(r=this.attributes).length;e<n;e++)(t=r[e]).skip&&i.push(t.attrName);return i},y.prototype.scan=function(t){return this.changeDetector.scan(t)},y.prototype.on=function(t,e,n){return this.changeDetector.on(t,e,n)},y.prototype.watch=function(t,e,n){return this.changeDetector.watch(t,e,n)},y.prototype.watchGroup=function(t,e){return this.changeDetector.watchGroup(t,e)},y.prototype.watchText=function(t,e,n){return this.changeDetector.watchText(t,e,n)},y.prototype.getValue=function(t){return this.changeDetector.getValue(t)},y.prototype.setValue=function(t,e){return this.changeDetector.setValue(t,e)},y.prototype.eval=function(t){return this.changeDetector.eval(t)},y.prototype.new=function(t,e){return!0===e?e={locals:!0}:!0===t&&null==e&&(t=null,e={locals:!0}),this.changeDetector.new(t,e)},y.prototype.bind=function(t,e,i){var s,a,c,l,u,p,h;for(this.stopBinding=!0,c=0,u=0,p=arguments.length;u<p;u++)(s=arguments[u])instanceof o&&(a=s,c+=1),r.isElement(s)&&(l=s,c+=1);return(h=arguments[c])||(h={skip:this.skippedAttr()}),l||(l=this.element),a||(a=this.changeDetector),n.bind(a,l,h)},w=function(t,e,i){var o,s,a,c,l,u,p,h,f,d,m,g,v,_,w,k,B,S,T,E,D,N,O,$,j,M,R,L;if(v={attr:[],dir:[],children:[]},c={directive:0,hook:0,skipToElement:null,fb:v},i=i||{},j=!1,R=i.skip_attr,!0===i.skip?i.skip_top=!0:R||(R=i.skip||[]),R instanceof Array||(R=[R]),!i.skip_top){for(o={list:T=[],element:e,skip_attr:R,attr_type:"E",cd:t},a=e.nodeName.toLowerCase(),C(a,o),"script"!==a&&"style"!==a||(j=!0),o.attr_type="A",w=0,k=(O=e.attributes).length;w<k;w++)s=O[w],C(s.name,o);if(i.attachDirective){$=i.attachDirective;for(a in $)$[a],C(a,o)}for(E=0,B=(T=T.sort(A)).length;E<B;E++)if(!(h=T[E]).skip){if(h.noDirective)throw"Directive not found: "+h.name;if(h.skip=!0,L=i.attachDirective&&i.attachDirective[h.attrName]?i.attachDirective[h.attrName]:e.getAttribute(h.attrName),h.is_attr)b(t,e,L,h.attrName)&&v.attr.push({attrName:h.attrName,value:L});else{f=h.directive,m=new y({element:e,attrName:h.attrName,attrArgument:h.attrArgument||null,attributes:T,stopBinding:!1,elementCanBeRemoved:i.elementCanBeRemoved,fbElement:i.fbElement}),n.debug.directive&&console.log("bind",h.attrName,L,h);try{"stopBinding"===f.$init(t,e,L,m)&&(j=!0)}catch(r){d=r,n.exceptionHandler(d,"Error in directive: "+h.attrName,{value:L,env:m,cd:t,scope:t.scope,element:e})}if(m.fastBinding?(g=r.isFunction(m.fastBinding)?m.fastBinding:f.init,v.dir.push({fb:g,attrName:h.attrName,value:L,attrArgument:m.attrArgument,fbData:m.fbData})):c.directive++,m.stopBinding){j=!0;break}m.skipToElement&&(c.skipToElement=m.skipToElement)}}}if(!j)for(M=null,_=D=0,S=(u=function(){var t,n,r,i;for(i=[],n=0,t=(r=e.childNodes).length;n<t;n++)l=r[n],i.push(l);return i}()).length;D<S;_=++D)(l=u[_])&&(M?M===l&&(M=null):(i.fbElement&&(p={fbElement:i.fbElement.childNodes[_]}),N=x(t,l,p),c.directive+=N.directive,c.hook+=N.hook,M=N.skipToElement,N.fb&&(N.fb.text||N.fb.attr&&N.fb.attr.length||N.fb.dir&&N.fb.dir.length||N.fb.children&&N.fb.children.length)&&v.children.push({index:_,fb:N.fb})));return c},x=function(t,e,r){var i,o,s,a,c,l,u;if(l={directive:0,hook:0,skipToElement:null,fb:null},n.hooks.binding.length)for(o=0,s=(c=n.hooks.binding).length;o<s;o++)if(i=c[o],l.hook+=1,(a=i.fn(t,e,r))&&a.owner)return l;return 1===e.nodeType?(a=w(t,e,r),l.directive+=a.directive,l.hook+=a.hook,l.skipToElement=a.skipToElement,l.fb=a.fb):3===e.nodeType?(u=k(t,e))&&(l.fb={text:u}):8===e.nodeType&&(a=_(t,e))&&(l.directive+=a.directive,l.skipToElement=a.skipToElement),l},n.nextTick=function(){var t,e,r;return r=null,e=[],t=function(){var t,i,o,s,a,c,l;for(r=null,i=e.slice(),e.length=0,a=0,c=i.length;a<c;a++){t=(s=i[a])[0],l=s[1];try{t.call(l)}catch(e){o=e,n.exceptionHandler(o,"$nextTick, error in function",{fn:t,self:l})}}return null},function(n){if(e.push([n,this]),!r)return r=setTimeout(t,0)}}(),n.bind=function(t,e,r){var i,o,s,a,c,l;if(!t)throw"No changeDetector";if(!e)throw"No element";if(r=r||{},n.option.domOptimization&&!r.noDomOptimization&&n.utils.optmizeElement(e),l=t.root,(i=!l.finishBinding_lock)&&(l.finishBinding_lock=!0,l.bindingResult={directive:0,hook:0}),c=x(t,e,r),l.bindingResult.directive+=c.directive,l.bindingResult.hook+=c.hook,t.digest(),i){for(l.finishBinding_lock=!1,a=l.watchers.finishBinding.slice(),l.watchers.finishBinding.length=0,o=0,s=a.length;o<s;o++)(0,a[o])();c.total=l.bindingResult}return c},function(){function t(t,e,n,r,i,o){r.callback.apply(null,o);var s=e._properties.root;s&&s.topCD&&s.topCD.scan({zone:!0})}var e=n.bind;n.bind=function(r,i,o){var s=r.root,a=n.option.zone;if(a){var c=!0===a?Zone:a,l=s.zone;if(l||(s.zone=l=c.current.fork({name:c.current.name+".x",properties:{root:s},onInvokeTask:t})),c.current!==l)return s.zone.run(e,null,[r,i,o])}return e(r,i,o)}}(),n.bootstrap=function(t,e){if(!t)return n.bootstrap("[al-app]"),n.bootstrap("[al\\:app]"),void n.bootstrap("[data-al-app]");var i;if(t instanceof n.core.ChangeDetector)i=t,t=e;else if(e instanceof n.core.ChangeDetector)i=e;else if(r.isFunction(e)){var o={};i=n.ChangeDetector(o),e.call(i,o)}else e&&(i=n.ChangeDetector(e));if(Array.isArray(t)){for(var s=void 0,a=0,c=t;a<c.length;a++){var l=c[a];s=n.bootstrap(l,i)}return s}if("string"==typeof t){for(var s=void 0,u=0,p=document.querySelectorAll(t);u<p.length;u++){var h=p[u];s=n.bootstrap(h,i)}return s}if(i||(i=n.ChangeDetector()),r.isElement(t)){for(var f,d,m=0,g=["al-app","al:app","data-al-app"];m<g.length&&(f=g[m],d=t.getAttribute(f),t.removeAttribute(f),!d);m++);var v;return d&&(v={skip_attr:[f],attachDirective:{}},n.d.al.ctrl?v.attachDirective["al-ctrl"]=d:v.attachDirective[d+"!"]=""),n.bind(i,t,v),i}n.exceptionHandler("Error in bootstrap","Error input arguments",{input:t})};var B,S;n.utils.getId=function(){var t,e;return e=function(){var t,e,n,r,i;for(i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),n=Math.floor((new Date).valueOf()/1e3)-1388512800,r="";n>0;)e=n-62*(t=Math.floor(n/62)),n=t,r=i[e]+r;return r}(),t=1,function(){return e+"#"+t++}}(),n.utils.clone=B=function(t,e){var n,r,i,o;if(null==e&&(e=128),e<1)return null;if(!t)return t;if("object"==typeof t){if(t instanceof Array)return i=function(){var r,i,o;for(o=[],r=0,i=t.length;r<i;r++)n=t[r],o.push(B(n,e-1));return o}();if(t instanceof Date)return new Date(t.valueOf());if(t.nodeType&&"function"==typeof t.cloneNode)return t;i={};for(r in t)o=t[r],"$"!==r[0]&&(i[r]=B(o,e-1));return i}return t},n.utils.equal=S=function(t,e,n){var r,i,o,s,a,c,l,u;if(null==n&&(n=128),n<1)return!0;if(!t||!e)return t===e;if(c=typeof t,l=typeof e,c!==l)return!1;if("object"===c){if(t instanceof Array){if(t.length!==e.length)return!1;for(r=i=0,s=t.length;i<s;r=++i)if(u=t[r],!S(u,e[r],n-1))return!1;return!0}if(t instanceof Date)return t.valueOf()===e.valueOf();if(t.nodeType&&"function"==typeof t.cloneNode)return t===e;a={};for(o in t)if(u=t[o],"$"!==o[0]&&(a[o]=!0,!S(u,e[o],n-1)))return!1;for(o in e)if(u=e[o],"$"!==o[0]&&!a[o]&&!S(u,t[o],n-1))return!1;return!0}return t===e},n.exceptionHandler=function(t,e,n){var r;return r=[],e&&r.push(e),t&&t.message&&r.push(t.message),n&&r.push(n),t&&r.push(t.stack?t.stack:t),console.error.apply(console,r)},function(){var t,e,r,i,o,s;s=function(){var t,e,n;for(n={},t=0,e=arguments.length;t<e;t++)n[arguments[t]]=!0;return n},o=s("instanceof","typeof","in","null","true","false","undefined","return"),e=function(){var t;return t=/[a-zA-Z\u0410-\u044F\u0401\u0451_\.\$]/,function(e){return e.match(t)}}(),r=function(t){return t.charCodeAt()>=48&&t.charCodeAt()<=57},i=function(){var t;return t=s("+","-",">","<","=","&","|","^","!","~"),function(e){return t[e]||!1}}(),t=s("=","+=","-=","++","--","|=","^=","&=","!=","<<=",">>="),n.utils.parsExpression=function(a,c){var l,u,p,h,f,d,m,g,v,y;return c=c||{},f=s.apply(null,c.input||[]),y=1,d=function(n){var o,s,a,c,l,u,p,h,f,m,g,v,b,_,w,x,k,A,C,B,S;for(b=n.line,_=n.result||[],m=n.index||0,v=n.level||0,k=n.stopKey||null,B="",g=null,S=[],w="",p="",x=!1,"",A="",C="",f="",c=0,h=null,u=function(){return f&&_.push({type:"free",value:f}),f=""};m<=b.length;)if(a=b[m-1],o=b[m++]||"",s=b[m],(x&&f||!o)&&u(),"string"!==x){if("key"===x){if(e(o)||r(o)){B+=o;continue}if("["===o){if(B+=o,!(l=d({line:b,index:m,level:v+1,stopKey:"]"})).stopKeyOk)throw"Error expression";m=l.index,B+="###"+l.uniq+"###]",S.push(l);continue}if("?"===o&&("."===s||"("===s||"["===s)){B+=o;continue}if("("===o){if(B+=o,!(l=d({line:b,index:m,level:v+1,stopKey:")"})).stopKeyOk)throw"Error expression";m=l.index,B+="###"+l.uniq+"###)",S.push(l);continue}g={type:"key",value:B,start:m-B.length-1,finish:m-1,children:S},_.push(g),x="",B="",S=[]}else if("sign"===x){if(i(o)){w+=o;continue}if("|"===w&&0===v&&0===c){h=b.substring(m-1),m=b.length+1;continue}(t[w]||"="===w[0]&&"="!==w[1])&&(g.assignment=!0),_.push({type:"sign",value:w}),x="",w=""}else if("digit"===x){if(r(o)||"."===o){p+=o;continue}_.push({type:"digit",value:p}),p=""}if(e(o))x="key",B+=o;else if(i(o))x="sign",w+=o;else if(r(o))x="digit",p+=o;else if('"'!==o&&"'"!==o){if(o===k)return u(),{result:_,index:m,stopKeyOk:!0,uniq:y++};"("===o&&c++,")"===o&&c--,"{"!==o?(":"===o&&"}"===k&&(g.type="free"),f+=o):(u(),l=d({line:b,index:m,level:v+1,stopKey:"}"}),_.push({type:"{}",child:l}),m=l.index)}else A=o,x="string",C+=o}else{if(o===A&&"\\"!==a){C+=o,_.push({type:"string",value:C}),C="",A="",x="";continue}C+=o}return u(),{result:_,index:m,filter:h}},p=d({line:a}),m={isSimple:!p.filter,simpleVariables:[]},p.filter?(m.expression=a.substring(0,a.length-p.filter.length-1),m.filter=p.filter):m.expression=a,g=function(t){var e;return e=t.split(/[\.\[\(\?]/),{count:e.length,firstPart:e[0]}},v=function(t,e){return e?"($$="+t+",$$==null)?undefined:":"($$=$$"+t+",$$==null)?undefined:"},h=function(t){return t.split(/[\.\[\(\?]/)[0]},u=function(t){var e,n,r,i,s,a,c,l,u,p;if("this"===t)return"$$scope";if(e=h(t),i=o[e]||f[e],"this"===e&&(t="$$scope"+t.slice(4),i=!0),1===(l=t.split("?")).length)return i?t:"$$scope."+t;for(i?(p=v(l[0],!0),n=l[0]):(p=v("scope."+l[0]),n="scope."+l[0]),r=0,a=(u=l.slice(1,l.length-1)).length;r<a;r++)"("===(c=u[r])[0]?p+=v(n+c,i):(p+=v(c),n+=c);return"("===(s=l[l.length-1])[0]?(i||(p+="$$"),p+=n+s):p+="$$"+s,"("+p+")"},l=function(t){var e,n,r,i,s,a,c,p,h,d,v,y,b;for(y="",i=0,c=(d=t.result).length;i<c;i++)if("key"!==(r=d[i]).type)"{}"!==r.type?y+=r.value:y+="{"+l(r.child)+"}";else{if(r.assignment?(h="this"===(b=g(r.value)).firstPart?"$$scope"+r.value.substring(4):f[b.firstPart]?r.value:b.count<2?"($$scope.$$root || $$scope)."+r.value:"$$scope."+r.value,m.isSimple=!1):o[r.value]?h=r.value:(h=u(r.value),m.simpleVariables.push(h)),r.children.length)for(s=0,p=(v=r.children).length;s<p;s++)a="###"+(e=v[s]).uniq+"###",n=l(e),h=h.split(a).join(n);y+=h}return y},m.result=l(p),n.debug.parser&&console.log(a,m),m},n.utils.parsFilter=function(t){var e,r,i;for(i=[],t=t.trim();t;){if(!(e=t.match(/^(\w+)([^\w])(.*)$/))){if(!(e=t.match(/^(\w+)$/)))return null;i.push({name:e[1],args:[],raw:""});break}"|"===e[2]?(i.push({name:e[1],args:[],raw:""}),t=e[3]):(r=n.utils.parsArguments(e[3],{stop:"|"}),i.push({name:e[1],args:r.result,raw:e[3].slice(0,r.length)}),t=e[3].slice(r.length+1).trim())}return{result:i}},n.utils.parsArguments=function(t,e){var n,r,i,o,s,a,c,l;for(e=e||{},s=0,i=[],r="",o=0,c=!1,l=!1,a=function(){r&&(i.push(r),r="")};s<=t.length;)if(n=t[s]||"",s++,c)r+=n,'"'===n&&(c=!1);else if(l)r+=n,"'"===n&&(l=!1);else if('"'!==n)if("'"!==n)if(o)r+=n,"("===n&&o++,")"===n&&o--;else if(" "!==n&&","!==n){if(e.stop&&e.stop===n){a();break}"("===n&&(o=1),r+=n}else a();else r+=n,l=!0;else r+=n,c=!0;return a(),{result:i,length:s-1}}}(),function(){var t,e,r;n.utils.pars_start_tag="{{",n.utils.pars_finish_tag="}}",r=function(t){var e,r,i,o,s,a,c,l;return l=n.utils.pars_start_tag,e=n.utils.pars_finish_tag,a=[],i=0,s=0,r=function(e){var n;return e=e||1,n=t.substring(s,i-e),s=i,n},c=null,o=function(n,s,l){var u,p,h,f;for(n||(c={type:"expression",list:[]},a.push(c)),f=null,u=null;i<t.length;){if(f=u,u=t[i],i+=1,p=f+u,h=t[i],u===s)return;if(!l){if(p===e&&0===n)return c.list.push(r(2)),!0;"("===u?o(n+1,")"):"{"===u?o(n+1,"}"):'"'===u?o(n+1,'"',!0):"'"===u?o(n+1,"'",!0):"|"===u&&0===n&&("|"===h?i+=1:c.list.push(r()))}}},function(){var e,n,s,c;for(n=null,e=null;i<t.length;)if(n=e,e=t[i],i+=1,n+e===l){if((c=r(2))&&a.push({type:"text",value:c}),!o(0))throw"Wrong expression"+t;e=null}if(s=r(-1))return a.push({type:"text",value:s})}(),n.debug.parser&&console.log("parsText",a),a},t={},e=function(t){var e,n;return function(){var r,i,o;for(o=[],r=0,i=t.length;r<i;r++)e=t[r],n={type:e.type,value:e.value},e.list&&(n.list=e.list.slice()),o.push(n);return o}()},n.utils.parsText=function(n){var i;return(i=t[n])||(t[n]=i=r(n)),e(i)}}(),function(){var t;n.utils.compile=t={},t.cache={},t.Function=Function,t.expression=function(e,r){var i,o,s,a,c,l,u;if(r=r||{},e=e.trim(),l=e+"#",l+=r.no_return?"+":"-",l+=r.string?"s":"v",r.input&&(l+=r.input.join(",")),c=t.cache[l])return c;s=(c=n.utils.parsExpression(e,{input:r.input})).result,r.no_return||!1?u="var $$;"+s:r.string&&!c.filter?(u="var $$, __ = ("+s+"); return '' + (__ || (__ == null?'':__))",c.rawExpression="(__="+s+") || (__ == null?'':__)"):u="var $$;return ("+s+")";try{r.input?((i=r.input.slice()).unshift("$$scope"),i.push(u),a=t.Function.apply(null,i)):a=t.Function("$$scope",u)}catch(t){throw o=t,n.exceptionHandler(o,"Wrong expression: "+e,{src:e,cfg:r}),"Wrong expression: "+s}return c.fn=a,t.cache[l]=c},t.cacheText={},t.buildText=function(e,n){var r,i,o,s,a,c,l;if(o=t.cacheText[e])return function(){return o.call(n)};for(l=[],a=s=0,c=n.length;s<c;a=++s)"expression"===(r=n[a]).type?r.fn?l.push("this["+a+"].fn(this.scope)"):l.push("((x=this["+a+"].value) || (x == null?'':x))"):r.value&&(i=r.value.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n"),l.push('"'+i+'"'));return l=l.join(" + "),o=t.Function("var x; return ("+l+")"),t.cacheText[e]=o,function(){return o.call(n)}},t.cacheSimpleText={},t.buildSimpleText=function(e,n){var r,i,o,s,a,c,l,u,p;if((c=e?t.cacheSimpleText[e]:null)||!n)return c||null;for(u=[],p=[],a=s=0,l=n.length;s<l;a=++s)"expression"===(r=n[a]).type?(u.push("("+r.re+")"),r.simpleVariables&&p.push.apply(p,r.simpleVariables)):r.value&&(i=r.value.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n"),u.push('"'+i+'"'));return u=u.join(" + "),o=t.Function("$$scope","var $$, __; return ("+u+")"),c={fn:o,simpleVariables:p},e&&(t.cacheSimpleText[e]=c),c}}();var T,E,D;return D=function(t){var e,n,r;if(!t.length)return"el";for(r="el",e=0,n=t.length;e<n;e++)r+=".childNodes["+t[e]+"]";return r},E=function(t){var e,r,i,o,s,a;for(o=0,a=(i=n.utils.parsText(t)).length;o<a;o++)if("expression"===(r=i[o]).type){if(r.list.length>1)return null;if("#"===(s=r.list[0])[0])return null;if("="===s[0])return null;if("::"===s.slice(0,2))return null;if(!(e=n.utils.compile.expression(s,{string:!0})).rawExpression)throw"Error";r.re=e.rawExpression}return n.utils.compile.buildSimpleText(t,i).fn},n.core.fastBinding=function(t){if(n.option.fastBinding&&!t.directive&&!t.hook&&t.fb)return new T(t)},T=function(t){var e,r,i,o;return r=this,i=[],r.fastWatchFn=[],e=[],(o=function(t,n){var s,a,c,l,u,p,h,f,d,m,g,v,y,b,_,w;if(t.dir)for(b=D(e),l=0,f=(g=t.dir).length;l<f;l++)s=g[l],i.push("s.dir("+r.fastWatchFn.length+", "+b+");"),r.fastWatchFn.push(s);if(t.attr)for(u=0,d=(v=t.attr).length;u<d;u++)w=(c=v[u]).value,p=c.attrName,b=D(e),a=E(w),_=w.replace(/"/g,'\\"').replace(/\n/g,"\\n"),a?(i.push('s.fw("'+_+'", '+r.fastWatchFn.length+", "+b+', "'+p+'");'),r.fastWatchFn.push(a)):i.push("s.wt('"+_+"', "+b+", '"+p+"');");if(t.text&&(b=D(e),a=E(t.text),_=t.text.replace(/"/g,'\\"').replace(/\n/g,"\\n"),a?(i.push('s.fw("'+_+'", '+r.fastWatchFn.length+", "+b+");"),r.fastWatchFn.push(a)):i.push('s.wt("'+_+'", '+b+");")),t.children)for(h=0,m=(y=t.children).length;h<m;h++)c=y[h],e.length=n+1,e[n]=c.index,o(c.fb,n+1)})(t.fb,0),i=i.join("\n"),r.resultFn=n.utils.compile.Function("s","el","f$",i),this},T.prototype.bind=function(t,e){this.currentCD=t,this.resultFn(this,e,r)},T.prototype.dir=function(t,e){var n,r,i,o;r=this.fastWatchFn[t],n=this.currentCD,i=new y({attrName:r.attrName,attrArgument:r.attrArgument,changeDetector:n,fbData:r.fbData}),(o=r.fb.call(i,n.scope,e,r.value,i))&&o.start&&o.start()},T.prototype.fw=function(t,e,n,r){var i,o,s,a;i=this.currentCD,a={isStatic:!1,isArray:!1,extraLoop:!1,deep:!1,value:s=(o=this.fastWatchFn[e])(i.locals),callback:null,exp:o,src:t,onStop:null,el:n,ea:r||null},i.watchList.push(a),u(i.scope,a,s)},T.prototype.wt=function(t,e,n){this.currentCD.watchText(t,null,{element:e,elementAttr:n})},function(){var t,e,i,o,s,a,c,l;n.hooks.attribute.unshift({code:"events",fn:function(){var t;(t=this.attrName.match(/^\@([\w\.\-]+)$/))&&(this.ns="al",this.name="on",this.attrArgument=t[1])}}),n.hooks.eventModifier={},(l=function(t,e){return n.hooks.eventModifier[t]={event:["keydown","keypress","keyup"],fn:function(t,n){t[e]||(n.stop=!0)}}})("alt","altKey"),l("control","ctrlKey"),l("ctrl","ctrlKey"),l("meta","metaKey"),l("shift","shiftKey"),n.hooks.eventModifier.self=function(t,e){if(t.target!==e.element)return e.stop=!0},n.hooks.eventModifier.once={beforeExec:function(t,e){return e.unbind()}},i=function(t,e){var n,i,o,s,a,c;if(c={},"string"==typeof t?c.event=t:"object"==typeof t&&t.event&&(c.event=t.event),"string"==typeof c.event&&(c.event=c.event.split(/\s+/)),e&&c.event){for(o=!1,i=0,s=(a=c.event).length;i<s;i++)if(n=a[i],e.indexOf(n)>=0){o=!0;break}if(!o)return null}return r.isFunction(t)?c.fn=t:t.fn&&(c.fn=t.fn),t.beforeExec&&(c.beforeExec=t.beforeExec),t.init&&(c.init=t.init),c},n.d.al.on=function(e,i,o,a){var l,u;a.attrArgument&&(n.option.removeAttribute&&(i.removeAttribute(a.attrName),a.fbElement&&a.fbElement.removeAttribute(a.attrName)),u=a.attrArgument.split(".")[0],(l=function(){}).prototype=c(a.attrArgument,t[u]),o&&(l.prototype.fn=a.changeDetector.compile(o,{no_return:!0,input:["$event","$element","$value"]})),l.prototype.expression=o,a.fastBinding=function(t,e,n,i){var o,a,c,u,p,h;for((c=new l).scope=t,c.element=e,c.cd=i.changeDetector,o=function(t){return s(c,t)},u=0,p=(h=c.eventList).length;u<p;u++)a=h[u],r.on(e,a,o);c.initFn&&c.initFn(t,e,n,i),c.unbind=function(){var t,n,i;for(t=0,n=(i=c.eventList).length;t<n;t++)a=i[t],r.off(e,a,o)},i.changeDetector.watch("$destroy",c.unbind)},a.fastBinding(e,i,o,a))},a={enter:13,tab:9,delete:46,backspace:8,esc:27,space:32,up:38,down:40,left:37,right:39},t={click:{stop:!0,prevent:!0},dblclick:{stop:!0,prevent:!0},submit:{stop:!0,prevent:!0},keyup:{filterByKey:!0},keypress:{filterByKey:!0},keydown:{filterByKey:!0}},c=function(t,e){var r,o,s,c,l,u,p,h,f;for(o={attrArgument:t,throttle:null,throttleTime:0,debounce:null,debounceId:null,initFn:null,eventList:null,stop:(e=e||{}).stop||!1,prevent:e.prevent||!1,scan:!0,modifiers:[]},s=(r=t.split("."))[0],c=null,(h=n.hooks.eventModifier[s])&&(h=i(h)).event&&(o.eventList=h.event,h.fn&&o.modifiers.push(h),h.init&&(o.initFn=h.init)),o.eventList||(o.eventList=[s]),l=0,p=(f=r.slice(1)).length;l<p;l++)"stop"!==(u=f[l])?"prevent"!==u?"nostop"!==u?"noprevent"!==u?"noscan"!==u?"throttle-"!==u.substring(0,9)?"debounce-"!==u.substring(0,9)?(h=n.hooks.eventModifier[u])?(h=i(h,o.eventList))&&o.modifiers.push(h):e.filterByKey&&(null===c&&(c={}),a[u]&&(u=a[u]),c[u]=!0):o.debounce=Number(u.substring(9)):o.throttle=Number(u.substring(9)):o.scan=!1:o.prevent=!1:o.stop=!1:o.prevent=!0:o.stop=!0;return o.filterByKey=c,o},o=function(t,e){var n;return"checkbox"===(n=t.element).type?n.checked:"radio"===n.type?n.value||n.checked:e.component?e.value:n.value},e=function(t,e){var r,i,s,a,c;for(i=0,s=(c=t.modifiers).length;i<s;i++)(a=c[i]).beforeExec&&a.beforeExec(e,t);if(t.fn)try{t.fn(t.cd.locals,e,t.element,o(t,e))}catch(i){r=i,n.exceptionHandler(r,"Error in event: "+t.attrArgument+" = "+t.expression,{attr:t.attrArgument,exp:t.expression,scope:t.scope,cd:t.cd,element:t.element,event:e})}t.scan&&t.cd.scan()},s=function(t,n){var r,i,o,s,a,c;if(!t.filterByKey||t.filterByKey[n.keyCode]){if(t.modifiers.length)for((r=function(){}).prototype=t,(i=new r).stop=!1,o=0,s=(c=t.modifiers).length;o<s;o++)if((a=c[o]).fn&&(a.fn(n,i),i.stop))return;t.prevent&&n.preventDefault(),t.stop&&n.stopPropagation(),t.debounce?(t.debounceId&&clearTimeout(t.debounceId),t.debounceId=setTimeout(function(){return t.debounceId=null,e(t,n)},t.debounce)):t.throttle?t.throttleTime<Date.now()&&(t.throttleTime=Date.now()+t.throttle,e(t,n)):e(t,n)}}}(),n.hooks.attribute.unshift({code:"directDirective",fn:function(){var t=this.attrName.match(/^(.*)\!$/);if(t){var e=t[1].replace(/(-\w)/g,function(t){return t.substring(1).toUpperCase()}),i=this.cd.locals[e]||n.ctrl[e]||n.option.globalController&&window[e];r.isFunction(i)?this.directive=function(t,e,r,o){var s=o.changeDetector;if(r){for(var a=n.utils.parsArguments(r),c=Array(a.result.length),l=0;l<a.result.length;l++)c[l]=n.utils.compile.expression(a.result[l],{input:["$element","$env"]}).fn(s.locals,e,o);i.apply(s,c)}else i.call(s,t,e,r,o)}:(this.result="noDirective",this.stop=!0)}}}),n.hooks.attribute.unshift({code:"elementVariable",fn:function(){var t=this.attrName.match(/^#([\w\.]*)$/);t&&(this.directive=e,this.attrArgument=t[1])}}),n.d.al.value=function(t,e,n,r){var i,o;return r.fastBinding=!0,i=function(){r.setValue(n,e.value),o.refresh(),r.scan()},r.on(e,"input",i),r.on(e,"change",i),o=r.watch(n,function(t){return null==t&&(t=""),e.value=t,"$scanNoChanges"})},n.d.al.checked=function(t,e,r,i){function o(t){var r=i.takeAttr(t);return n.option.removeAttribute&&(e.removeAttribute(t),i.fbElement&&i.fbElement.removeAttribute(t)),r}function s(t,e){var n=o(e);if(n)return c.opt[t]=n,!0;var r=o(":"+e)||o("al-attr."+e);return r?(c.watch.push([r,t]),!0):void 0}function a(t,e,n){for(var r in e.fbData.opt)t[r]=e.fbData.opt[r];for(var i=function(r){var i=r[1];e.watch(r[0],function(e){t[i]=e,n()})},o=0,s=e.fbData.watch;o<s.length;o++){i(s[o])}}var c=i.fbData={opt:{},watch:[]};s("value","value")?i.fastBinding=function(t,e,n,r){function i(){return e.checked=s&&s.indexOf(c.value)>=0,"$scanNoChanges"}var o,s=null,c={};a(c,r,i),o=r.watch(n,function(t){s=t,Array.isArray(s)||(s=null),i()},{isArray:!0}),r.on(e,"change",function(){if(s||(s=[],r.setValue(n,s)),e.checked)s.indexOf(c.value)<0&&s.push(c.value);else{var t=s.indexOf(c.value);t>=0&&s.splice(t,1)}o.refresh(),r.scan()})}:(s("true","true-value"),s("false","false-value"),i.fastBinding=function(t,e,n,r){function i(){return e.checked=o===c.true,"$scanNoChanges"}var o,s,c={true:!0,false:!1};a(c,r,i),s=r.watch(n,function(t){o=t,i()}),r.on(e,"change",function(){o=e.checked?c.true:c.false,r.setValue(n,o),s.refresh(),r.scan()})}),i.fastBinding(t,e,r,i)},n.d.al.if=function(t,e,i,o){var s;return o.elementCanBeRemoved?(n.exceptionHandler(null,o.attrName+" can't control element because of "+o.elementCanBeRemoved,{scope:t,element:e,value:i,env:o}),{}):(o.stopBinding=!0,s={item:null,childCD:null,base_element:null,top_element:null,start:function(){s.prepare(),s.watchModel()},prepare:function(){s.base_element=e,s.top_element=document.createComment(" "+o.attrName+": "+i+" "),r.before(e,s.top_element),r.remove(e)},updateDom:function(t){t?s.insertBlock(t):s.removeBlock()},removeBlock:function(){s.childCD&&(s.childCD.destroy(),s.childCD=null,s.removeDom(s.item),s.item=null)},insertBlock:function(){s.childCD||(s.item=s.base_element.cloneNode(!0),s.insertDom(s.top_element,s.item),s.childCD=o.changeDetector.new(),n.bind(s.childCD,s.item,{skip_attr:o.skippedAttr(),elementCanBeRemoved:o.attrName}))},watchModel:function(){o.watch(i,s.updateDom)},removeDom:function(t){r.remove(t)},insertDom:function(t,e){r.after(t,e)}})},n.d.al.ifnot=function(t,e,r,i){var o;return o=n.d.al.if(t,e,r,i),o.updateDom=function(t){t?o.removeBlock():o.insertBlock()},o},n.directives.al.repeat={restrict:"AM",init:function(t,e,i,o){var s,a;return o.elementCanBeRemoved?(n.exceptionHandler(null,o.attrName+" can't control element because of "+o.elementCanBeRemoved,{scope:t,element:e,value:i,env:o}),{}):(o.stopBinding=!0,s=o.changeDetector,a={start:function(){a.parsExpression(),a.prepareDom(),a.buildUpdateDom(),a.watchModel()},parsExpression:function(){var t,e;if("("===(e=i.trim())[0])if(a.objectMode=!0,t=e.match(/\((\w+),\s*(\w+)\)\s+in\s+(.+)\s+orderBy:(.+)\s*$/))a.objectKey=t[1],a.objectValue=t[2],a.expression=t[3]+" | toArray:"+a.objectKey+","+a.objectValue+" | orderBy:"+t[4],a.nameOfKey="$item",a.trackExpression="$item."+a.objectKey;else{if(!(t=e.match(/\((\w+),\s*(\w+)\)\s+in\s+(.+)\s*$/)))throw"Wrong repeat: "+i;a.objectKey=t[1],a.objectValue=t[2],a.expression=t[3]+" | toArray:"+a.objectKey+","+a.objectValue,a.nameOfKey="$item",a.trackExpression="$item."+a.objectKey}else{if((t=e.match(/(.*) track by ([\w\.\$\(\)]+)/))&&(a.trackExpression=t[2],e=t[1]),!(t=e.match(/\s*(\w+)\s+in\s+(.+)/)))throw"Wrong repeat: "+i;a.nameOfKey=t[1],a.expression=t[2]}},watchModel:function(){var t;t=a.objectMode?{deep:!0}:{isArray:!0},a.watch=s.watch(a.expression,a.updateDom,t)},prepareDom:function(){var t,s,c,l,u,p;if(8===e.nodeType){for(a.top_element=e,a.element_list=s=[],t=e.nextSibling;t;){if(8===t.nodeType&&(u=t.nodeValue,"/directive:"===(p=u.trim().split(/\s+/))[0]&&"al-repeat"===p[1])){o.skipToElement=t;break}s.push(t),t=t.nextSibling}for(c=0,l=s.length;c<l;c++)t=s[c],r.remove(t)}else a.base_element=e,a.top_element=document.createComment(" "+i+" "),r.before(e,a.top_element),r.remove(e),n.option.removeAttribute&&e.removeAttribute(o.attrName)},makeChild:function(t,e,n){var r;return r=s.new(null,{locals:!0}),a.updateLocals(r,t,e,n),r},updateLocals:function(t,e,n,r){var i;i=t.locals,a.objectMode?(i[a.objectKey]=e[a.objectKey],i[a.objectValue]=e[a.objectValue]):i[a.nameOfKey]=e,i.$index=n,i.$first=0===n,i.$last=n===r.length-1},rawUpdateDom:function(t,e){var n,i,o,s,a,c;for(i=0,a=t.length;i<a;i++)n=t[i],r.remove(n);for(s=0,c=e.length;s<c;s++)o=e[s],r.after(o.after,o.element)},buildUpdateDom:function(){return a.updateDom=function(){var t,r,i,c,l,u,p,h,f,d,m,g,v;return m=[],u=0,i=null,v=0,g=o.skippedAttr(),"$index"===a.trackExpression?(p={},f=function(t){return p[u]||null},h=function(t){null!=t.$id&&delete p[t.$id]},d=function(t,e){e.$id=u,p[u]=e}):a.trackExpression?(p={},t=function(){var t;return t=s.compile(a.trackExpression,{input:["$id",a.nameOfKey]}),function(e,n){return t(s.scope,e,n)}}(),r=function(t){var e;return(e=t.$alite_id)?e:e=t.$alite_id=n.utils.getId()},f=function(e){var n;return null!=(n=t(r,e))?p[n]:null},h=function(t){var e;null!=(e=t.$id)&&delete p[e]},d=function(e,n){var i;i=t(r,e),n.$id=i,p[i]=n}):window.Map?(p=new Map,f=function(t){return p.get(t)},h=function(t){p.delete(t.item)},d=function(t,e){p.set(t,e)}):(p={},f=function(t){var e;return"object"!=typeof t?p[t]||null:(e=t.$alite_id)?p[e]:null},h=function(t){var e;e=t.$id,p[e]&&(t.$id=null,delete p[e])},d=function(t,e){var r;"object"==typeof t?(r=n.utils.getId(),t.$alite_id=r,e.$id=r,p[r]=e):(e.$id=t,p[t]=e)}),c=[],l=function(t){var e,n;if("object"!=(n=typeof t)){if("number"===n)e=Math.floor(t);else if("string"===n&&(e=Math.floor(t),isNaN(e)))return[];if(e<c.length)c.length=e;else for(;c.length<e;)c.push(c.length);return c}return t&&t.length?t:[]},a.element_list?function(t){var e,r,i,s,c,p,v,y,b,_,w,x,k,A,C,B,S,T,E,D,N,O,$,j,M,R,L,P,I,U,H,q,F,V,z,K,W;for(M=l(t),B=a.top_element,s=[],U=[],b=0,S=m.length;b<S;b++)(I=m[b]).active=!1;for(u=k=0,T=M.length;k<T;u=++k)w=M[u],(I=f(w))&&(I.active=!0);for(c=[],A=0,E=m.length;A<E;A++)if(!(I=m[A]).active){for(I.prev&&(I.prev.next=I.next),I.next&&(I.next.prev=I.prev),h(I),I.CD.destroy(),C=0,D=(z=I.element_list).length;C<D;C++)p=z[C],c.push(p);I.next=null,I.prev=null,I.element_list=null}for(e=[],null,V=null,F=!1,v=a.element_list.length-1,u=R=0,N=M.length;R<N;u=++R)if(w=M[u],x=w,I=f(w)){if(a.updateLocals(I.CD,w,u,M),I.prev===V){if(F)for(L=0,O=(K=I.element_list).length;L<O;L++)p=K[L],s.push({element:p,after:B}),B=p;V=I,B=I.element_list[v],I.active=!0,U.push(I);continue}for(I.prev=V,V&&(V.next=I),H=0,$=(W=I.element_list).length;H<$;H++)p=W[H],s.push({element:p,after:B}),B=p;F=!0,V=I,I.active=!0,U.push(I)}else i=a.makeChild(x,u,M),y=function(){var t,n,o,c;for(c=[],n=0,t=(o=a.element_list).length;n<t;n++)r=o[n],p=r.cloneNode(!0),e.push({cd:i,el:p}),s.push({element:p,after:B}),c.push(B=p);return c}(),d(w,I={CD:i,element_list:y,prev:V,next:null,active:!0,item:w}),V?(P=V.next,V.next=I,I.next=P,P&&(P.prev=I)):0===u&&m[0]&&(P=m[0],I.next=P,P.prev=I),V=I,U.push(I);for(m=U,a.rawUpdateDom(c,s),c.length=0,s.length=0,q=0,j=e.length;q<j;q++)_=e[q],n.bind(_.cd,_.el,{skip_attr:g,elementCanBeRemoved:o.attrName,noDomOptimization:!0})}:function(t){var r,s,c,p,y,b,_,w,x,k,A,C,B,S,T,E,D,N,O,$,j,M;for(E=l(t),C=a.top_element,v++,c=[],O=[],r=[],null,j=null,$=!1,u=b=0,B=E.length;b<B;u=++b)if(w=E[u],x=w,N=f(w)){if(a.updateLocals(N.CD,w,u,E),N.prev===j){$&&c.push({element:N.element,after:j.element}),j=N,C=N.element,N.version=v,O.push(N);continue}N.prev=j,j&&(j.next=N),c.push({element:N.element,after:C}),$=!0,C=N.element,j=N,N.version=v,O.push(N)}else s=a.makeChild(x,u,E),e=a.base_element.cloneNode(!0),null===i?(y=a.base_element.cloneNode(!0),M=n.bind(s,e,{skip_attr:g,elementCanBeRemoved:o.attrName,noDomOptimization:!0,fbElement:y}),(i=n.core.fastBinding(M)||!1)&&(a.base_element=y)):r.push({cd:s,el:e}),c.push({element:e,after:C}),C=e,d(w,N={CD:s,element:e,prev:j,next:null,version:v,item:w}),j?(D=j.next,j.next=N,N.next=D,D&&(D.prev=N)):0===u&&m[0]&&(D=m[0],N.next=D,D.prev=N),j=N,O.push(N);for(p=[],k=0,S=m.length;k<S;k++)(N=m[k]).version!==v&&(N.prev&&(N.prev.next=N.next),N.next&&(N.next.prev=N.prev),h(N),N.CD.destroy(),p.push(N.element),N.next=null,N.prev=null,N.element=null);for(m=O,a.rawUpdateDom(p,c),p.length=0,c.length=0,A=0,T=r.length;A<T;A++)_=r[A],i?i.bind(_.cd,_.el):n.bind(_.cd,_.el,{skip_attr:g,elementCanBeRemoved:o.attrName,noDomOptimization:!0})}}()}})}},n.d.al.init=function(t,e,r,i){var o,s,a,c,l;n.option.removeAttribute&&(e.removeAttribute(i.attrName),i.fbElement&&i.fbElement.removeAttribute(i.attrName)),o=i.changeDetector,l=["$element"],"window"===i.attrArgument&&l.push("window");try{c=o.compile(r,{no_return:!0,input:l}),i.fastBinding=a=function(t,e,n,r){return c(r.changeDetector.locals,e,window)},a(t,e,r,i)}catch(a){s=a,n.exceptionHandler(s,"al-init, error in expression: "+r,{exp:r,scope:t,cd:o,element:e}),i.fastBinding=function(){}}},n.d.al.app={stopBinding:!0},n.d.al.stop={restrict:"AE",stopBinding:!0},n.d.al.cloak=function(t,e,n,i){e.removeAttribute(i.attrName),n&&r.removeClass(e,n)},n.d.al.html={restrict:"AM",priority:100,modifier:{},link:function(t,e,i,o){var s;return o.elementCanBeRemoved&&8!==e.nodeType?(n.exceptionHandler(null,o.attrName+" can't control element because of "+o.elementCanBeRemoved,{scope:t,element:e,value:i,env:o}),{}):(o.stopBinding=!0,s={baseElement:null,topElement:null,activeElement:null,childCD:null,name:i,watchMode:null,start:function(){s.parsing(),s.prepare(),s.watchModel()},parsing:function(){var r,a,c,l;if(o.attrArgument)for(r=0,a=(l=o.attrArgument.split(".")).length;r<a;r++)"literal"!==(c=l[r])?"tpl"!==c?n.d.al.html.modifier[c]&&n.d.al.html.modifier[c](s,{scope:t,element:e,inputName:i,env:o}):s.watchMode="tpl":s.watchMode="literal"},prepare:function(){8===e.nodeType?(s.baseElement=null,s.topElement=e):(s.baseElement=e,s.topElement=document.createComment(" "+o.attrName+": "+i+" "),r.before(e,s.topElement),r.remove(e))},removeBlock:function(){var t,e,n,r;if(s.childCD&&(s.childCD.destroy(),s.childCD=null),s.activeElement){if(Array.isArray(s.activeElement))for(e=0,n=(r=s.activeElement).length;e<n;e++)t=r[e],s.removeDom(t);else s.removeDom(s.activeElement);s.activeElement=null}},insertBlock:function(t){var e,r,i;if(s.baseElement)s.activeElement=s.baseElement.cloneNode(!1),s.activeElement.innerHTML=t,s.insertDom(s.topElement,s.activeElement),s.childCD=o.changeDetector.new(),n.bind(s.childCD,s.activeElement,{skip_attr:o.skippedAttr(),elementCanBeRemoved:o.attrName});else for((i=document.createElement("body")).innerHTML=t,e=s.topElement,s.activeElement=[],s.childCD=o.changeDetector.new();r=i.firstChild;)s.insertDom(e,r),e=r,s.activeElement.push(r),n.bind(s.childCD,e,{skip_attr:o.skippedAttr(),elementCanBeRemoved:o.attrName})},updateDom:function(t){s.removeBlock(),t&&s.insertBlock(t)},removeDom:function(t){r.remove(t)},insertDom:function(t,e){r.after(t,e)},watchModel:function(){"literal"===s.watchMode?s.updateDom(s.name):"tpl"===s.watchMode?o.watchText(s.name,s.updateDom):o.watch(s.name,s.updateDom)}})}},n.d.al.html.modifier.id=function(t){return t.updateDom=function(e){var n,r;t.removeBlock(),(r=document.getElementById(e))&&(n=r.innerHTML)&&t.insertBlock(n)}},n.d.al.html.modifier.url=function(t){return t.loadHtml=function(t){r.ajax(t)},t.updateDom=function(e){e?t.loadHtml({cache:!0,url:e,success:function(e){t.removeBlock(),t.insertBlock(e)},error:t.removeBlock}):t.removeBlock()}},n.d.al.html.modifier.scope=function(t,e){var r,i,o;if(2===(r=t.name.split(":")).length)t.name=r[0],o=r[1];else{if(r=t.name.match(/(.+)\:\s*\:\:([\d\w]+)$/))i=!0;else if(i=!1,!(r=t.name.match(/(.+)\:\s*([\.\w]+)$/)))throw"Wrong expression "+t.name;t.name=r[1],o=r[2]}return"outer",t.insertBlock=function(r){var s,a,c;t.activeElement=t.baseElement.cloneNode(!1),t.activeElement.innerHTML=r,t.insertDom(t.topElement,t.activeElement),a=e.env.changeDetector,(s=t.childCD=a.new(null,{locals:!0})).locals.outer=null,c=a.watch(o,function(t){return s.locals.outer=t},{oneTime:i}),t.childCD.watch("$destroy",function(){return c.stop()}),n.bind(t.childCD,t.activeElement,{skip_attr:e.env.skippedAttr()})}},n.d.al.html.modifier.inline=function(t,e){var n;return n=t.prepare,t.prepare=function(){return n(),e.env.setValue(t.name,t.baseElement.innerHTML)}},n.d.al.radio=function(t,e,n,r){var i,o,s;return i=r.takeAttr("al-value"),o=i?r.eval(i):r.takeAttr("value"),r.on(e,"change",function(){r.setValue(n,o),s.refresh(),r.scan()}),s=r.watch(n,function(t){return e.checked=o===t,"$scanNoChanges"})},function(){var t;window.Map?((t=function(){return this.idByItem=new Map,this.itemById={},this.index=1,this}).prototype.acquire=function(t){var e;return e="i"+this.index++,this.idByItem.set(t,e),this.itemById[e]=t,e},t.prototype.release=function(t){var e;e=this.itemById[t],delete this.itemById[t],this.idByItem.delete(e)},t.prototype.replace=function(t,e){var n;n=this.itemById[t],this.idByItem.delete(n),this.idByItem.set(e,t),this.itemById[t]=e},t.prototype.getId=function(t){return this.idByItem.get(t)},t.prototype.getItem=function(t){return this.itemById[t]||null}):((t=function(){return this.itemById={"i#null":null},this}).prototype.acquire=function(t){var e;return null===t?"i#null":("object"==typeof t?(e=t.$alite_id)||(t.$alite_id=e=n.utils.getId()):e=""+t,this.itemById[e]=t,e)},t.prototype.release=function(t){delete this.itemById[t]},t.prototype.replace=function(t,e){this.itemById[t]=e},t.prototype.getId=function(t){return null===t?"i#null":"object"==typeof t?t.$alite_id:""+t},t.prototype.getItem=function(t){return this.itemById[t]||null}),n.d.al.select=function(e,r,i,o){var s,a,c,l,u,p;return s=o.changeDetector.new(),o.stopBinding=!0,s.$select={mapper:c=new t},a=null,s.$select.change=function(){return n.nextTick(function(){return u(a)})},u=function(t){var e;return(e=c.getId(t))?r.value=e:r.selectedIndex=-1},p=s.watch(i,function(t){return a=t,u(t)}),l=function(t){return a=c.getItem(t.target.value),s.setValue(i,a),p.refresh(),s.scan()},o.on(r,"input",l),o.on(r,"change",l),n.bind(s,r,{skip_attr:o.skippedAttr()})},n.d.al.option=function(t,e,r,i){var o,s,a,c,l,u;for(o=u=i.changeDetector,a=0;a<=4&&!(l=u.$select);++a)u=u.parent||{};l?(c=l.mapper,s=null,o.watch(r,function(t){s?c.getId(t)!==s?(c.release(s),s=c.acquire(t),e.value=s,l.change()):c.replace(s,t):(s=c.acquire(t),e.value=s,l.change())}),o.watch("$destroy",function(){return c.release(s),l.change()})):n.exceptionHandler("","Error in al-option - al-select is not found",{cd:o,scope:o.scope,element:e,value:r})}}(),function(){var t;n.hooks.attribute.unshift({code:"attribute",fn:function(){var t,e;(t=this.attrName.match(/^\:([\w\.\-]+)$/))&&("html"===(e=t[1]).split(".")[0]?(this.name="html",e=e.substring(5)):this.name="attr",this.ns="al",this.attrArgument=e)}}),t={checked:"checked",readonly:"readOnly",value:"value",selected:"selected",muted:"muted",disabled:"disabled",hidden:"hidden"},n.d.al.attr=function(e,i,o,s){var a,c,l,u,p,h,f,d,m,g;if(s.attrArgument){if(l=s.attrArgument.split("."),c=l[0],f=t[c],p=l.indexOf("tpl")>0,n.option.removeAttribute&&(i.removeAttribute(s.attrName),s.fbElement&&s.fbElement.removeAttribute(s.attrName)),a={readOnly:!0},d=null,"style"===c){if(!l[1])throw"Style is not declared";m=l[1].replace(/(-\w)/g,function(t){return t.substring(1).toUpperCase()}),d=function(t,e){return null==e&&(e=""),t.style[m]=e}}else"class"===c&&l.length>1?(p=!1,h=l.slice(1),d=function(t,e){var n,i,o,s,a;if(e)for(i=0,s=h.length;i<s;i++)n=h[i],r.addClass(t,n);else for(o=0,a=h.length;o<a;o++)n=h[o],r.removeClass(t,n)}):"focus"===c?d=function(t,e){return e?t.focus():t.blur()}:f?d=function(t,e){if(void 0===e&&(e=null),t[f]!==e)return t[f]=e}:(a.element=i,a.elementAttr=c);g=p?"watchText":"watch",(u=d?function(t,e,n,r){return r.changeDetector[g](o,function(t){return d(e,t)},a)}:function(t,e,n,r){return r.changeDetector[g](o,null,{readOnly:!0,element:e,elementAttr:c})})(e,i,o,s),s.fastBinding=u}}}(),n.d.al.model=function(t,e,r,i){var o;if("select"===(o=e.nodeName.toLowerCase()))return n.d.al.select.call(this,t,e,r,i);if("input"===o){if("checkbox"===e.type)return n.d.al.checked.call(this,t,e,r,i);if("radio"===e.type)return n.d.al.radio.call(this,t,e,r,i)}return n.d.al.value.call(this,t,e,r,i)},n.filters.slice=function(t,e,n){return t?n?t.slice(e,n):t.slice(e):null},function(){var t;t=function(t){return t<10?"0"+t:""+t},n.filters.date=function(e,n){var r,i,o,s,a;if(!e)return"";for(s=n,i=0,o=(a=[[/yyyy/g,(e=new Date(e)).getFullYear()],[/mm/g,t(e.getMonth()+1)],[/dd/g,t(e.getDate())],[/HH/g,t(e.getHours())],[/MM/g,t(e.getMinutes())],[/SS/g,t(e.getSeconds())]]).length;i<o;i++)r=a[i],s=s.replace(r[0],r[1]);return s}}(),n.filters.json={watchMode:"deep",fn:function(t){return JSON.stringify(n.utils.clone(t),null,4)}},n.filters.filter=function(t,e,n){var r,i,o,s,a,c,l,u,p,h,f;if(2===arguments.length)a=null,f=e;else{if(3!==arguments.length)return t;a=e,f=n}if(!t||null==f||""===f)return t;if(u=[],p=(""+f).toLowerCase(),a)for(i=0,c=t.length;i<c;i++)(r=t[i])[a]===f?u.push(r):(""+r[a]).toLowerCase().indexOf(p)>=0&&u.push(r);else for(o=0,l=t.length;o<l;o++){r=t[o];for(s in r)(h=r[s])===f?u.push(r):(""+h).toLowerCase().indexOf(p)>=0&&u.push(r)}return u},n.filters.orderBy=function(t,e,n){return!t instanceof Array?null:(n=n?1:-1,t.sort(function(t,r){return t[e]<r[e]?-n:t[e]>r[e]?n:0}))},n.filters.throttle={init:function(t,e,n){var r;return e=Number(e),r=null,{onChange:function(t){return r&&clearTimeout(r),r=setTimeout(function(){return r=null,n.setValue(t),n.changeDetector.scan()},e)}}}},n.filters.toArray={init:function(t,e,n){var r,i,o;return 2===n.conf.args.length?(r=n.conf.args[0],o=n.conf.args[1]):(r="key",o="value"),i=[],{watchMode:"deep",onChange:function(t){var e,s,a;i.length=0;for(s in t)a=t[s],(e={})[r]=s,e[o]=a,i.push(e);return n.setValue(i)}}}},n.filters.storeTo={init:function(t,e,n){return{onChange:function(t){return n.changeDetector.setValue(e,t),n.setValue(t)}}}},n.text["="]=function(t,e,r,i){var o;if((o=n.utils.compile.expression(e)).filters)throw"Conflict: bindonce and filters, use one-time binding";i.finally(o.fn(i.changeDetector.locals))},n.text["::"]=function(t,e,n,r){r.changeDetector.watch(e,function(t){return r.finally(t)},{oneTime:!0})},function(){function t(t){return t.replace(/(-\w)/g,function(t){return t.substring(1).toUpperCase()})}function e(e){var n,i=e.listener,o=e.childCD,s=e.name,a=e.parentName,c=e.parentCD,l={};if(s=t(s),i&&!0!==i)if(r.isFunction(i))n=i;else{if(n=i.onChange,"copy"===i||"copy"===i.watchMode)return void(n?n(a):o.scope[s]=a);"array"!==i&&"array"!==i.watchMode||(l.isArray=!0),"deep"!==i&&"deep"!==i.watchMode||(l.deep=!0)}n||(n=function(t){o.scope[s]=t,o.scan()}),c.watch(a,n,l)}var r=n.f$;n.component=function(i,o){var s,a,c=i.match(/^(\w+)[\-](.+)$/);c?(s=c[1],a=c[2]):(s="$global",a=i),a=t(a),n.d[s]||(n.d[s]={}),n.d[s][a]={restrict:"E",stopBinding:!0,priority:n.priority.$component,init:function(t,s,a,c){function l(t,n){var r=":"+t,i=d.takeAttr(r);if(!i){if(!(i=d.takeAttr(t)))return;n="copy"}e({childCD:f,listener:n,name:t,parentName:i,parentCD:h})}function u(t){D||h.digest(),n.bind(f,s,{skip:!0})}var p={$sendEvent:function(t,e){var n=new CustomEvent(t);n.value=e,n.component=!0,s.dispatchEvent(n)}},h=c.changeDetector.new(),f=n.ChangeDetector(p),d=new y({element:s,attributes:c.attributes,changeDetector:f,parentChangeDetector:h});try{var m=o.call(f,p,s,d)||{}}catch(t){return void n.exceptionHandler(t,"Error in component <"+i+">: ",{element:s,scope:p,cd:f})}m.onStart&&f.watch("$finishBinding",function(){m.onStart(),f.scan()});var g=!1;h.watch("$destroy",function(){g=!0,f.destroy()}),f.watch("$destroy",function(){m.onDestroy&&m.onDestroy(),g||h.destroy()});for(var v=0,b=s.attributes;v<b.length;v++){if("#"===(B=b[v]).name[0]){var _=B.name.slice(1);if(_){m.api?h.setValue(_,m.api):h.setValue(_,p);break}}}if(m.props)if(Array.isArray(m.props))for(var w=0,x=m.props;w<x.length;w++){l(k=x[w],!0)}else for(var k in m.props)l(k,m.props[k]);else for(var A=0,C=s.attributes;A<C.length;A++){var B=C[A],S=B.name,T=B.value;if(T){var E=S.match(/^\:(.*)$/);E&&e({childCD:f,name:E[1],parentName:T,parentCD:h})}}var D=!1;if(h.watch("$onScanOnce",function(){return D=!0}),m.template&&(s.innerHTML=m.template),m.templateId){var N=document.getElementById(m.templateId);if(!N)throw"No template "+m.templateId;s.innerHTML=N.innerHTML}m.templateUrl?r.ajax({url:m.templateUrl,cache:!0,success:function(t){s.innerHTML=t,u()},error:function(){console.error("Template is not loaded",m.templateUrl)}}):u()}}}}(),n}var e=t();e.makeInstance=t,"function"==typeof alightInitCallback?alightInitCallback(e):"function"==typeof define?define(function(){return e}):"object"==typeof module&&"object"==typeof module.exports?module.exports=e:(e.option.globalController=!0,window.alight=e,e.f$.ready(e.bootstrap))}(),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.io=e():t.io=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t,e){"object"===(void 0===t?"undefined":i(t))&&(e=t,t=void 0),e=e||{};var n,r=o(t),s=r.source,u=r.id,p=r.path,h=l[u]&&p in l[u].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||h?(c("ignoring socket cache for %s",s),n=a(s,e)):(l[u]||(c("new io instance for %s",s),l[u]=a(s,e)),n=l[u]),r.query&&!e.query?e.query=r.query:e&&"object"===i(e.query)&&(e.query=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}(e.query)),n.socket(r.path,e)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(1),s=n(7),a=n(17),c=n(3)("socket.io-client");t.exports=e=r;var l=e.managers={};e.protocol=s.protocol,e.connect=r,e.Manager=n(17),e.Socket=n(44)},function(t,e,n){(function(e){"use strict";var r=n(2),i=n(3)("socket.io-client:url");t.exports=function(t,n){var o=t;n=n||e.location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(i("protocol-less url %s",t),t=void 0!==n?n.protocol+"//"+t:"https://"+t),i("parse %s",t),o=r(t)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";var s=-1!==o.host.indexOf(":")?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+s+":"+o.port,o.href=o.protocol+"://"+s+(n&&n.port===o.port?"":":"+o.port),o}}).call(e,function(){return this}())},function(t,e){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,i=t.indexOf("["),o=t.indexOf("]");-1!=i&&-1!=o&&(t=t.substring(0,i)+t.substring(i,o).replace(/:/g,";")+t.substring(o,t.length));for(var s=n.exec(t||""),a={},c=14;c--;)a[r[c]]=s[c]||"";return-1!=i&&-1!=o&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(t,e,n){(function(r){function i(){try{return e.storage.debug}catch(t){}if(void 0!==r&&"env"in r)return r.env.DEBUG}(e=t.exports=n(5)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(){var t=arguments,n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return t;var r="color: "+this.color,i=0,o=0;return(t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1)))[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))}),t.splice(o,0,r),t},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=i,e.useColors=function(){return"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(i())}).call(e,n(4))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(){d&&h&&(d=!1,h.length?f=h.concat(f):m=-1,f.length&&s())}function s(){if(!d){var t=i(o);d=!0;for(var e=f.length;e;){for(h=f,f=[];++m<e;)h&&h[m].run();m=-1,e=f.length}h=null,d=!1,function(t){if(u===clearTimeout)return clearTimeout(t);if((u===r||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(t);try{u(t)}catch(e){try{return u.call(null,t)}catch(e){return u.call(this,t)}}}(t)}}function a(t,e){this.fun=t,this.array=e}function c(){}var l,u,p=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{u="function"==typeof clearTimeout?clearTimeout:r}catch(t){u=r}}();var h,f=[],d=!1,m=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new a(t,e)),1!==f.length||d||i(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e,n){function r(t){function n(){}function r(){var t=r,n=+new Date,s=n-(i||n);t.diff=s,t.prev=i,t.curr=n,i=n,null==t.useColors&&(t.useColors=e.useColors()),null==t.color&&t.useColors&&(t.color=e.colors[o++%e.colors.length]);for(var a=new Array(arguments.length),c=0;c<a.length;c++)a[c]=arguments[c];a[0]=e.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var l=0;a[0]=a[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;l++;var i=e.formatters[r];if("function"==typeof i){var o=a[l];n=i.call(t,o),a.splice(l,1),l--}return n}),a=e.formatArgs.apply(t,a);(r.log||e.log||console.log.bind(console)).apply(t,a)}n.enabled=!1,r.enabled=!0;var s=e.enabled(t)?r:n;return s.namespace=t,s}(e=t.exports=r.debug=r).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){e.save(t);for(var n=(t||"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(t=n[i].replace(/[\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(6),e.names=[],e.skips=[],e.formatters={};var i,o=0},function(t,e){function n(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var r=1e3,i=60*r,o=60*i,s=24*o,a=365.25*s;t.exports=function(t,e){e=e||{};var c=typeof t;if("string"===c&&t.length>0)return function(t){if(!((t=String(t)).length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*a;case"days":case"day":case"d":return n*s;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(t);if("number"===c&&!1===isNaN(t))return e.long?function(t){return n(t,s,"day")||n(t,o,"hour")||n(t,i,"minute")||n(t,r,"second")||t+" ms"}(t):function(t){return t>=s?Math.round(t/s)+"d":t>=o?Math.round(t/o)+"h":t>=i?Math.round(t/i)+"m":t>=r?Math.round(t/r)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){function r(){}function i(t){var n="",r=!1;return n+=t.type,e.BINARY_EVENT!=t.type&&e.BINARY_ACK!=t.type||(n+=t.attachments,n+="-"),t.nsp&&"/"!=t.nsp&&(r=!0,n+=t.nsp),null!=t.id&&(r&&(n+=",",r=!1),n+=t.id),null!=t.data&&(r&&(n+=","),n+=u.stringify(t.data)),l("encoded %j as %s",t,n),n}function o(){this.reconstructor=null}function s(t){var n={},r=0;if(n.type=Number(t.charAt(0)),null==e.types[n.type])return c();if(e.BINARY_EVENT==n.type||e.BINARY_ACK==n.type){for(var i="";"-"!=t.charAt(++r)&&(i+=t.charAt(r),r!=t.length););if(i!=Number(i)||"-"!=t.charAt(r))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"==t.charAt(r+1))for(n.nsp="";++r;){if(","==(s=t.charAt(r)))break;if(n.nsp+=s,r==t.length)break}else n.nsp="/";var o=t.charAt(r+1);if(""!==o&&Number(o)==o){for(n.id="";++r;){var s=t.charAt(r);if(null==s||Number(s)!=s){--r;break}if(n.id+=t.charAt(r),r==t.length)break}n.id=Number(n.id)}return t.charAt(++r)&&(n=function(t,e){try{t.data=u.parse(e)}catch(t){return c()}return t}(n,t.substr(r))),l("decoded %s as %j",t,n),n}function a(t){this.reconPack=t,this.buffers=[]}function c(t){return{type:e.ERROR,data:"parser error"}}var l=n(8)("socket.io-parser"),u=n(11),p=n(13),h=n(14),f=n(16);e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=r,e.Decoder=o,r.prototype.encode=function(t,n){if(l("encoding packet %j",t),e.BINARY_EVENT==t.type||e.BINARY_ACK==t.type)!function(t,e){h.removeBlobs(t,function(t){var n=h.deconstructPacket(t),r=i(n.packet),o=n.buffers;o.unshift(r),e(o)})}(t,n);else{n([i(t)])}},p(o.prototype),o.prototype.add=function(t){var n;if("string"==typeof t)n=s(t),e.BINARY_EVENT==n.type||e.BINARY_ACK==n.type?(this.reconstructor=new a(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!f(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",n))}},o.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},a.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length==this.reconPack.attachments){var e=h.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},a.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,e,n){function r(){var t;try{t=e.storage.debug}catch(t){}return t}(e=t.exports=n(9)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(){var t=arguments,n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return t;var r="color: "+this.color,i=0,o=0;return(t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1)))[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))}),t.splice(o,0,r),t},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=r,e.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){return JSON.stringify(t)},e.enable(r())},function(t,e,n){(e=t.exports=function(t){function n(){}function o(){var t=o,n=+new Date,s=n-(r||n);t.diff=s,t.prev=r,t.curr=n,r=n,null==t.useColors&&(t.useColors=e.useColors()),null==t.color&&t.useColors&&(t.color=e.colors[i++%e.colors.length]);var a=Array.prototype.slice.call(arguments);a[0]=e.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var c=0;a[0]=a[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;c++;var i=e.formatters[r];if("function"==typeof i){var o=a[c];n=i.call(t,o),a.splice(c,1),c--}return n}),"function"==typeof e.formatArgs&&(a=e.formatArgs.apply(t,a)),(o.log||e.log||console.log.bind(console)).apply(t,a)}n.enabled=!1,o.enabled=!0;var s=e.enabled(t)?o:n;return s.namespace=t,s}).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){e.save(t);for(var n=(t||"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(t=n[i].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(10),e.names=[],e.skips=[],e.formatters={};var r,i=0},function(t,e){function n(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var r=1e3,i=60*r,o=60*i,s=24*o,a=365.25*s;t.exports=function(t,e){return e=e||{},"string"==typeof t?function(t){if(!((t=""+t).length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*a;case"days":case"day":case"d":return n*s;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}(t):e.long?function(t){return n(t,s,"day")||n(t,o,"hour")||n(t,i,"minute")||n(t,r,"second")||t+" ms"}(t):function(t){return t>=s?Math.round(t/s)+"d":t>=o?Math.round(t/o)+"h":t>=i?Math.round(t/i)+"m":t>=r?Math.round(t/r)+"s":t+"ms"}(t)}},function(t,e,n){(function(t,n){(function(){function r(t,e){function n(t){if(n[t]!==g)return n[t];var r;if("bug-string-char-index"==t)r="a"!="a"[0];else if("json"==t)r=n("json-stringify")&&n("json-parse");else{var i,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var c=e.stringify,u="function"==typeof c&&b;if(u){(i=function(){return 1}).toJSON=i;try{u="0"===c(0)&&"0"===c(new o)&&'""'==c(new a)&&c(y)===g&&c(g)===g&&c()===g&&"1"===c(i)&&"[1]"==c([i])&&"[null]"==c([g])&&"null"==c(null)&&"[null,null,null]"==c([g,y,null])&&c({a:[i,!0,!1,null,"\0\b\n\f\r\t"]})==s&&"1"===c(null,i)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new l(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==c(new l(864e13))&&'"-000001-01-01T00:00:00.000Z"'==c(new l(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==c(new l(-1))}catch(t){u=!1}}r=u}if("json-parse"==t){var p=e.parse;if("function"==typeof p)try{if(0===p("0")&&!p(!1)){var h=5==(i=p(s)).a.length&&1===i.a[0];if(h){try{h=!p('"\t"')}catch(t){}if(h)try{h=1!==p("01")}catch(t){}if(h)try{h=1!==p("1.")}catch(t){}}}}catch(t){h=!1}r=h}}return n[t]=!!r}t||(t=s.Object()),e||(e=s.Object());var o=t.Number||s.Number,a=t.String||s.String,c=t.Object||s.Object,l=t.Date||s.Date,u=t.SyntaxError||s.SyntaxError,p=t.TypeError||s.TypeError,h=t.Math||s.Math,f=t.JSON||s.JSON;"object"==typeof f&&f&&(e.stringify=f.stringify,e.parse=f.parse);var d,m,g,v=c.prototype,y=v.toString,b=new l(-0xc782b5b800cec);try{b=-109252==b.getUTCFullYear()&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(t){}if(!n("json")){var _="[object Function]",w="[object Number]",x="[object String]",k="[object Array]",A=n("bug-string-char-index");if(!b)var C=h.floor,B=[0,31,59,90,120,151,181,212,243,273,304,334],S=function(t,e){return B[e]+365*(t-1970)+C((t-1969+(e=+(e>1)))/4)-C((t-1901+e)/100)+C((t-1601+e)/400)};if((d=v.hasOwnProperty)||(d=function(t){var e,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=y?d=function(t){var e=this.__proto__,n=t in(this.__proto__=null,this);return this.__proto__=e,n}:(e=n.constructor,d=function(t){var n=(this.constructor||e).prototype;return t in this&&!(t in n&&this[t]===n[t])}),n=null,d.call(this,t)}),m=function(t,e){var n,r,o,s=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n;for(o in r)d.call(r,o)&&s++;return n=r=null,s?m=2==s?function(t,e){var n,r={},i=y.call(t)==_;for(n in t)i&&"prototype"==n||d.call(r,n)||!(r[n]=1)||!d.call(t,n)||e(n)}:function(t,e){var n,r,i=y.call(t)==_;for(n in t)i&&"prototype"==n||!d.call(t,n)||(r="constructor"===n)||e(n);(r||d.call(t,n="constructor"))&&e(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(t,e){var n,o,s=y.call(t)==_,a=!s&&"function"!=typeof t.constructor&&i[typeof t.hasOwnProperty]&&t.hasOwnProperty||d;for(n in t)s&&"prototype"==n||!a.call(t,n)||e(n);for(o=r.length;n=r[--o];a.call(t,n)&&e(n));}),m(t,e)},!n("json-stringify")){var T={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},E=function(t,e){return("000000"+(e||0)).slice(-t)},D=function(t){for(var e='"',n=0,r=t.length,i=!A||r>10,o=i&&(A?t.split(""):t);n<r;n++){var s=t.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=T[s];break;default:if(s<32){e+="\\u00"+E(2,s.toString(16));break}e+=i?o[n]:t.charAt(n)}}return e+'"'},N=function(t,e,n,r,i,o,s){var a,c,l,u,h,f,v,b,_,A,B,T,O,$,j,M;try{a=e[t]}catch(t){}if("object"==typeof a&&a)if("[object Date]"!=(c=y.call(a))||d.call(a,"toJSON"))"function"==typeof a.toJSON&&(c!=w&&c!=x&&c!=k||d.call(a,"toJSON"))&&(a=a.toJSON(t));else if(a>-1/0&&a<1/0){if(S){for(h=C(a/864e5),l=C(h/365.2425)+1970-1;S(l+1,0)<=h;l++);for(u=C((h-S(l,0))/30.42);S(l,u+1)<=h;u++);h=1+h-S(l,u),v=C((f=(a%864e5+864e5)%864e5)/36e5)%24,b=C(f/6e4)%60,_=C(f/1e3)%60,A=f%1e3}else l=a.getUTCFullYear(),u=a.getUTCMonth(),h=a.getUTCDate(),v=a.getUTCHours(),b=a.getUTCMinutes(),_=a.getUTCSeconds(),A=a.getUTCMilliseconds();a=(l<=0||l>=1e4?(l<0?"-":"+")+E(6,l<0?-l:l):E(4,l))+"-"+E(2,u+1)+"-"+E(2,h)+"T"+E(2,v)+":"+E(2,b)+":"+E(2,_)+"."+E(3,A)+"Z"}else a=null;if(n&&(a=n.call(e,t,a)),null===a)return"null";if("[object Boolean]"==(c=y.call(a)))return""+a;if(c==w)return a>-1/0&&a<1/0?""+a:"null";if(c==x)return D(""+a);if("object"==typeof a){for($=s.length;$--;)if(s[$]===a)throw p();if(s.push(a),B=[],j=o,o+=i,c==k){for(O=0,$=a.length;O<$;O++)T=N(O,a,n,r,i,o,s),B.push(T===g?"null":T);M=B.length?i?"[\n"+o+B.join(",\n"+o)+"\n"+j+"]":"["+B.join(",")+"]":"[]"}else m(r||a,function(t){var e=N(t,a,n,r,i,o,s);e!==g&&B.push(D(t)+":"+(i?" ":"")+e)}),M=B.length?i?"{\n"+o+B.join(",\n"+o)+"\n"+j+"}":"{"+B.join(",")+"}":"{}";return s.pop(),M}};e.stringify=function(t,e,n){var r,o,s,a;if(i[typeof e]&&e)if((a=y.call(e))==_)o=e;else if(a==k){s={};for(var c,l=0,u=e.length;l<u;c=e[l++],((a=y.call(c))==x||a==w)&&(s[c]=1));}if(n)if((a=y.call(n))==w){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else a==x&&(r=n.length<=10?n:n.slice(0,10));return N("",(c={},c[""]=t,c),o,s,r,"",[])}}if(!n("json-parse")){var O,$,j=a.fromCharCode,M={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},R=function(){throw O=$=null,u()},L=function(){for(var t,e,n,r,i,o=$,s=o.length;O<s;)switch(i=o.charCodeAt(O)){case 9:case 10:case 13:case 32:O++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=A?o.charAt(O):o[O],O++,t;case 34:for(t="@",O++;O<s;)if((i=o.charCodeAt(O))<32)R();else if(92==i)switch(i=o.charCodeAt(++O)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=M[i],O++;break;case 117:for(e=++O,n=O+4;O<n;O++)(i=o.charCodeAt(O))>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||R();t+=j("0x"+o.slice(e,O));break;default:R()}else{if(34==i)break;for(i=o.charCodeAt(O),e=O;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++O);t+=o.slice(e,O)}if(34==o.charCodeAt(O))return O++,t;R();default:if(e=O,45==i&&(r=!0,i=o.charCodeAt(++O)),i>=48&&i<=57){for(48==i&&(i=o.charCodeAt(O+1))>=48&&i<=57&&R(),r=!1;O<s&&(i=o.charCodeAt(O))>=48&&i<=57;O++);if(46==o.charCodeAt(O)){for(n=++O;n<s&&(i=o.charCodeAt(n))>=48&&i<=57;n++);n==O&&R(),O=n}if(101==(i=o.charCodeAt(O))||69==i){for(43!=(i=o.charCodeAt(++O))&&45!=i||O++,n=O;n<s&&(i=o.charCodeAt(n))>=48&&i<=57;n++);n==O&&R(),O=n}return+o.slice(e,O)}if(r&&R(),"true"==o.slice(O,O+4))return O+=4,!0;if("false"==o.slice(O,O+5))return O+=5,!1;if("null"==o.slice(O,O+4))return O+=4,null;R()}return"$"},P=function(t){var e,n;if("$"==t&&R(),"string"==typeof t){if("@"==(A?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];"]"!=(t=L());n||(n=!0))n&&(","==t?"]"==(t=L())&&R():R()),","==t&&R(),e.push(P(t));return e}if("{"==t){for(e={};"}"!=(t=L());n||(n=!0))n&&(","==t?"}"==(t=L())&&R():R()),","!=t&&"string"==typeof t&&"@"==(A?t.charAt(0):t[0])&&":"==L()||R(),e[t.slice(1)]=P(L());return e}R()}return t},I=function(t,e,n){var r=U(t,e,n);r===g?delete t[e]:t[e]=r},U=function(t,e,n){var r,i=t[e];if("object"==typeof i&&i)if(y.call(i)==k)for(r=i.length;r--;)I(i,r,n);else m(i,function(t){I(i,t,n)});return n.call(t,e,i)};e.parse=function(t,e){var n,r;return O=0,$=""+t,n=P(L()),"$"!=L()&&R(),O=$=null,e&&y.call(e)==_?U((r={},r[""]=n,r),"",e):n}}}return e.runInContext=r,e}var i={function:!0,object:!0},o=i[typeof e]&&e&&!e.nodeType&&e,s=i[typeof window]&&window||this,a=o&&i[typeof t]&&t&&!t.nodeType&&"object"==typeof n&&n;if(!a||a.global!==a&&a.window!==a&&a.self!==a||(s=a),o&&!0)r(s,o);else{var c=s.JSON,l=s.JSON3,u=!1,p=r(s,s.JSON3={noConflict:function(){return u||(u=!0,s.JSON=c,s.JSON3=l,c=l=null),p}});s.JSON={parse:p.parse,stringify:p.stringify}}}).call(this)}).call(e,n(12)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){function n(t){if(t)return function(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}(t)}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},n.prototype.once=function(t,e){function n(){r.off(t,n),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=e,this.on(t,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var r,i=0;i<n.length;i++)if((r=n[i])===e||r.fn===e){n.splice(i,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[t];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e);return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){(function(t){var r=n(15),i=n(16);e.deconstructPacket=function(t){function e(t){if(!t)return t;if(i(t)){var o={_placeholder:!0,num:n.length};return n.push(t),o}if(r(t)){for(var s=new Array(t.length),a=0;a<t.length;a++)s[a]=e(t[a]);return s}if("object"==typeof t&&!(t instanceof Date)){s={};for(var c in t)s[c]=e(t[c]);return s}return t}var n=[],o=t.data,s=t;return s.data=e(o),s.attachments=n.length,{packet:s,buffers:n}},e.reconstructPacket=function(t,e){function n(t){if(t&&t._placeholder){return e[t.num]}if(r(t)){for(var i=0;i<t.length;i++)t[i]=n(t[i]);return t}if(t&&"object"==typeof t){for(var o in t)t[o]=n(t[o]);return t}return t}return t.data=n(t.data),t.attachments=void 0,t},e.removeBlobs=function(e,n){function o(e,c,l){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){s++;var u=new FileReader;u.onload=function(){l?l[c]=this.result:a=this.result,--s||n(a)},u.readAsArrayBuffer(e)}else if(r(e))for(var p=0;p<e.length;p++)o(e[p],p,e);else if(e&&"object"==typeof e&&!i(e))for(var h in e)o(e[h],h,e)}var s=0,a=e;o(a),s||n(a)}}).call(e,function(){return this}())},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e){(function(e){t.exports=function(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t,e){return this instanceof r?(t&&"object"===(void 0===t?"undefined":i(t))&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new c.Encoder,this.decoder=new c.Decoder,this.autoConnect=!1!==e.autoConnect,void(this.autoConnect&&this.open())):new r(t,e)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(18),s=n(44),a=n(35),c=n(7),l=n(46),u=n(47),p=n(3)("socket.io-client:manager"),h=n(42),f=n(48),d=Object.prototype.hasOwnProperty;t.exports=r,r.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)d.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},r.prototype.updateSocketIds=function(){for(var t in this.nsps)d.call(this.nsps,t)&&(this.nsps[t].id=this.engine.id)},a(r.prototype),r.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},r.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},r.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},r.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},r.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},r.prototype.open=r.prototype.connect=function(t,e){if(p("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;p("opening %s",this.uri),this.engine=o(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var i=l(n,"open",function(){r.onopen(),t&&t()}),s=l(n,"error",function(e){if(p("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",e),t){var n=new Error("Connection error");n.data=e,t(n)}else r.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;p("connect attempt will timeout after %d",a);var c=setTimeout(function(){p("connect attempt timed out after %d",a),i.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(i),this.subs.push(s),this},r.prototype.onopen=function(){p("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(l(t,"data",u(this,"ondata"))),this.subs.push(l(t,"ping",u(this,"onping"))),this.subs.push(l(t,"pong",u(this,"onpong"))),this.subs.push(l(t,"error",u(this,"onerror"))),this.subs.push(l(t,"close",u(this,"onclose"))),this.subs.push(l(this.decoder,"decoded",u(this,"ondecoded")))},r.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},r.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},r.prototype.ondata=function(t){this.decoder.add(t)},r.prototype.ondecoded=function(t){this.emit("packet",t)},r.prototype.onerror=function(t){p("error",t),this.emitAll("error",t)},r.prototype.socket=function(t,e){function n(){~h(i.connecting,r)||i.connecting.push(r)}var r=this.nsps[t];if(!r){r=new s(this,t,e),this.nsps[t]=r;var i=this;r.on("connecting",n),r.on("connect",function(){r.id=i.engine.id}),this.autoConnect&&n()}return r},r.prototype.destroy=function(t){var e=h(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},r.prototype.packet=function(t){p("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(n){for(var r=0;r<n.length;r++)e.engine.write(n[r],t.options);e.encoding=!1,e.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},r.prototype.cleanup=function(){p("cleanup");for(var t=this.subs.length,e=0;e<t;e++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){p("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},r.prototype.onclose=function(t){p("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)p("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();p("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout(function(){t.skipReconnect||(p("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(p("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(p("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(n)}})}},r.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},function(t,e,n){t.exports=n(19)},function(t,e,n){t.exports=n(20),t.exports.parser=n(27)},function(t,e,n){(function(e){function r(t,n){if(!(this instanceof r))return new r(t,n);n=n||{},t&&"object"==typeof t&&(n=t,t=null),t?(t=l(t),n.hostname=t.host,n.secure="https"===t.protocol||"wss"===t.protocol,n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=l(n.host).host),this.secure=null!=n.secure?n.secure:e.location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.agent=n.agent||!1,this.hostname=n.hostname||(e.location?location.hostname:"localhost"),this.port=n.port||(e.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},"string"==typeof this.query&&(this.query=p.decode(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||"t",this.timestampRequests=n.timestampRequests,this.transports=n.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate&&(n.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized?null:n.rejectUnauthorized,this.forceNode=!!n.forceNode;var i="object"==typeof e&&e;i.global===i&&(n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),n.localAddress&&(this.localAddress=n.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}var i=n(21),o=n(35),s=n(3)("engine.io-client:socket"),a=n(42),c=n(27),l=n(2),u=n(43),p=n(36);t.exports=r,r.priorWebsocketSuccess=!1,o(r.prototype),r.protocol=c.protocol,r.Socket=r,r.Transport=n(26),r.transports=n(21),r.parser=n(27),r.prototype.createTransport=function(t){s('creating transport "%s"',t);var e=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(this.query);e.EIO=c.protocol,e.transport=t,this.id&&(e.sid=this.id);return new i[t]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:e,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders,forceNode:this.forceNode,localAddress:this.localAddress})},r.prototype.open=function(){var t;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},r.prototype.setTransport=function(t){s("setting transport %s",t.name);var e=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},r.prototype.probe=function(t){function e(){if(h.onlyBinaryUpgrades){var e=!this.supportsBinary&&h.transport.supportsBinary;p=p||e}p||(s('probe transport "%s" opened',t),u.send([{type:"ping",data:"probe"}]),u.once("packet",function(e){if(!p)if("pong"===e.type&&"probe"===e.data){if(s('probe transport "%s" pong',t),h.upgrading=!0,h.emit("upgrading",u),!u)return;r.priorWebsocketSuccess="websocket"===u.name,s('pausing current transport "%s"',h.transport.name),h.transport.pause(function(){p||"closed"!==h.readyState&&(s("changing transport and sending upgrade packet"),l(),h.setTransport(u),u.send([{type:"upgrade"}]),h.emit("upgrade",u),u=null,h.upgrading=!1,h.flush())})}else{s('probe transport "%s" failed',t);var n=new Error("probe error");n.transport=u.name,h.emit("upgradeError",n)}}))}function n(){p||(p=!0,l(),u.close(),u=null)}function i(e){var r=new Error("probe error: "+e);r.transport=u.name,n(),s('probe transport "%s" failed because of error: %s',t,e),h.emit("upgradeError",r)}function o(){i("transport closed")}function a(){i("socket closed")}function c(t){u&&t.name!==u.name&&(s('"%s" works - aborting "%s"',t.name,u.name),n())}function l(){u.removeListener("open",e),u.removeListener("error",i),u.removeListener("close",o),h.removeListener("close",a),h.removeListener("upgrading",c)}s('probing transport "%s"',t);var u=this.createTransport(t,{probe:1}),p=!1,h=this;r.priorWebsocketSuccess=!1,u.once("open",e),u.once("error",i),u.once("close",o),this.once("close",a),this.once("upgrading",c),u.open()},r.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",r.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},r.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(s('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(u(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else s('packet received with socket readyState "%s"',this.readyState)},r.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},r.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},r.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){s("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},r.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},r.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},r.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},r.prototype.write=r.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this},r.prototype.sendPacket=function(t,e,n,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:t,data:e,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},r.prototype.close=function(){function t(){r.onClose("forced close"),s("socket closing - telling transport to close"),r.transport.close()}function e(){r.removeListener("upgrade",e),r.removeListener("upgradeError",e),t()}function n(){r.once("upgrade",e),r.once("upgradeError",e)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var r=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():t()}):this.upgrading?n():t()}return this},r.prototype.onError=function(t){s("socket error %j",t),r.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},r.prototype.onClose=function(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){s('socket close with reason: "%s"',t);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),n.writeBuffer=[],n.prevBufferLen=0}},r.prototype.filterUpgrades=function(t){for(var e=[],n=0,r=t.length;n<r;n++)~a(this.transports,t[n])&&e.push(t[n]);return e}}).call(e,function(){return this}())},function(t,e,n){(function(t){var r=n(22),i=n(24),o=n(39),s=n(40);e.polling=function(e){var n=!1,s=!1,a=!1!==e.jsonp;if(t.location){var c="https:"===location.protocol,l=location.port;l||(l=c?443:80),n=e.hostname!==location.hostname||l!==e.port,s=e.secure!==c}if(e.xdomain=n,e.xscheme=s,"open"in new r(e)&&!e.forceJSONP)return new i(e);if(!a)throw new Error("JSONP disabled");return new o(e)},e.websocket=s}).call(e,function(){return this}())},function(t,e,n){(function(e){var r=n(23);t.exports=function(t){var n=t.xdomain,i=t.xscheme,o=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!n||r))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!i&&o)return new XDomainRequest}catch(t){}if(!n)try{return new(e[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}}).call(e,function(){return this}())},function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},function(t,e,n){(function(e){function r(){}function i(t){if(c.call(this,t),this.requestTimeout=t.requestTimeout,e.location){var n="https:"===location.protocol,r=location.port;r||(r=n?443:80),this.xd=t.hostname!==e.location.hostname||r!==t.port,this.xs=t.secure!==n}else this.extraHeaders=t.extraHeaders}function o(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function s(){for(var t in o.requests)o.requests.hasOwnProperty(t)&&o.requests[t].abort()}var a=n(22),c=n(25),l=n(35),u=n(37),p=n(3)("engine.io-client:polling-xhr");t.exports=i,t.exports.Request=o,u(i,c),i.prototype.supportsBinary=!0,i.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new o(t)},i.prototype.doWrite=function(t,e){var n="string"!=typeof t&&void 0!==t,r=this.request({method:"POST",data:t,isBinary:n}),i=this;r.on("success",e),r.on("error",function(t){i.onError("xhr post error",t)}),this.sendXhr=r},i.prototype.doPoll=function(){p("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},l(o.prototype),o.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var n=this.xhr=new a(t),r=this;try{p("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,this.async);try{if(this.extraHeaders){n.setDisableHeaderCheck(!0);for(var i in this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this.extraHeaders[i])}}catch(t){}if(this.supportsBinary&&(n.responseType="arraybuffer"),"POST"===this.method)try{this.isBinary?n.setRequestHeader("Content-type","application/octet-stream"):n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{n.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in n&&(n.withCredentials=!0),this.requestTimeout&&(n.timeout=this.requestTimeout),this.hasXDR()?(n.onload=function(){r.onLoad()},n.onerror=function(){r.onError(n.responseText)}):n.onreadystatechange=function(){4===n.readyState&&(200===n.status||1223===n.status?r.onLoad():setTimeout(function(){r.onError(n.status)},0))},p("xhr data %s",this.data),n.send(this.data)}catch(t){return void setTimeout(function(){r.onError(t)},0)}e.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},o.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},o.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=r:this.xhr.onreadystatechange=r,t)try{this.xhr.abort()}catch(t){}e.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(t){}if("application/octet-stream"===e)t=this.xhr.response||this.xhr.responseText;else if(this.supportsBinary)try{t=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(e){for(var n=new Uint8Array(this.xhr.response),r=[],i=0,o=n.length;i<o;i++)r.push(n[i]);t=String.fromCharCode.apply(null,r)}else t=this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},o.prototype.hasXDR=function(){return void 0!==e.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},o.requestsCount=0,o.requests={},e.document&&(e.attachEvent?e.attachEvent("onunload",s):e.addEventListener&&e.addEventListener("beforeunload",s,!1))}).call(e,function(){return this}())},function(t,e,n){function r(t){var e=t&&t.forceBase64;u&&!e||(this.supportsBinary=!1),i.call(this,t)}var i=n(26),o=n(36),s=n(27),a=n(37),c=n(38),l=n(3)("engine.io-client:polling");t.exports=r;var u=null!=new(n(22))({xdomain:!1}).responseType;a(r,i),r.prototype.name="polling",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(t){function e(){l("paused"),n.readyState="paused",t()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(l("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){l("pre-pause polling complete"),--r||e()})),this.writable||(l("we are currently writing - waiting to pause"),r++,this.once("drain",function(){l("pre-pause writing complete"),--r||e()}))}else e()},r.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},r.prototype.onData=function(t){var e=this;l("polling got data %s",t);s.decodePayload(t,this.socket.binaryType,function(t,n,r){return"opening"===e.readyState&&e.onOpen(),"close"===t.type?(e.onClose(),!1):void e.onPacket(t)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},r.prototype.doClose=function(){function t(){l("writing close packet"),e.write([{type:"close"}])}var e=this;"open"===this.readyState?(l("transport open - closing"),t()):(l("transport not open - deferring close"),this.once("open",t))},r.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")};s.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,n)})},r.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";!1!==this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||t.sid||(t.b64=1),t=o.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(n=":"+this.port),t.length&&(t="?"+t);return e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t}},function(t,e,n){function r(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}var i=n(27),o=n(35);t.exports=r,o(r.prototype),r.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},r.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},r.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(t){var e=i.decodePacket(t,this.socket.binaryType);this.onPacket(e)},r.prototype.onPacket=function(t){this.emit("packet",t)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(t,e,n){(function(t){function r(t,n,r){if(!n)return e.encodeBase64Packet(t,r);if(f)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var i=new FileReader;return i.onload=function(){t.data=i.result,e.encodePacket(t,n,!0,r)},i.readAsArrayBuffer(t.data)}(t,n,r);var i=new Uint8Array(1);i[0]=d[t.type];return r(new v([i.buffer,t.data]))}function i(t,e,n){for(var r=new Array(t.length),i=l(t.length,n),o=function(t,n,i){e(n,function(e,n){r[t]=n,i(e,r)})},s=0;s<t.length;s++)o(s,t[s],i)}var o,s=n(28),a=n(29),c=n(30),l=n(31),u=n(32);t&&t.ArrayBuffer&&(o=n(33));var p="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),h="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),f=p||h;e.protocol=3;var d=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},m=s(d),g={type:"error",data:"parser error"},v=n(34);e.encodePacket=function(n,i,o,s){"function"==typeof i&&(s=i,i=!1),"function"==typeof o&&(s=o,o=null);var a=void 0===n.data?void 0:n.data.buffer||n.data;if(t.ArrayBuffer&&a instanceof ArrayBuffer)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var i=t.data,o=new Uint8Array(i),s=new Uint8Array(1+i.byteLength);s[0]=d[t.type];for(var a=0;a<o.length;a++)s[a+1]=o[a];return r(s.buffer)}(n,i,s);if(v&&a instanceof t.Blob)return r(n,i,s);if(a&&a.base64)return function(t,n){return n("b"+e.packets[t.type]+t.data.data)}(n,s);var c=d[n.type];return void 0!==n.data&&(c+=o?u.encode(String(n.data)):String(n.data)),s(""+c)},e.encodeBase64Packet=function(n,r){var i="b"+e.packets[n.type];if(v&&n.data instanceof t.Blob){var o=new FileReader;return o.onload=function(){var t=o.result.split(",")[1];r(i+t)},o.readAsDataURL(n.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(n.data))}catch(t){for(var a=new Uint8Array(n.data),c=new Array(a.length),l=0;l<a.length;l++)c[l]=a[l];s=String.fromCharCode.apply(null,c)}return i+=t.btoa(s),r(i)},e.decodePacket=function(t,n,r){if(void 0===t)return g;if("string"==typeof t){if("b"==t.charAt(0))return e.decodeBase64Packet(t.substr(1),n);if(r&&!1===(t=function(t){try{t=u.decode(t)}catch(t){return!1}return t}(t)))return g;i=t.charAt(0);return Number(i)==i&&m[i]?t.length>1?{type:m[i],data:t.substring(1)}:{type:m[i]}:g}var i=new Uint8Array(t)[0],o=c(t,1);return v&&"blob"===n&&(o=new v([o])),{type:m[i],data:o}},e.decodeBase64Packet=function(t,e){var n=m[t.charAt(0)];if(!o)return{type:n,data:{base64:!0,data:t.substr(1)}};var r=o.decode(t.substr(1));return"blob"===e&&v&&(r=new v([r])),{type:n,data:r}},e.encodePayload=function(t,n,r){"function"==typeof n&&(r=n,n=null);var o=a(t);return n&&o?v&&!f?e.encodePayloadAsBlob(t,r):e.encodePayloadAsArrayBuffer(t,r):t.length?void i(t,function(t,r){e.encodePacket(t,!!o&&n,!0,function(t){r(null,function(t){return t.length+":"+t}(t))})},function(t,e){return r(e.join(""))}):r("0:")},e.decodePayload=function(t,n,r){if("string"!=typeof t)return e.decodePayloadAsBinary(t,n,r);"function"==typeof n&&(r=n,n=null);var i;if(""==t)return r(g,0,1);for(var o,s,a="",c=0,l=t.length;c<l;c++){var u=t.charAt(c);if(":"!=u)a+=u;else{if(""==a||a!=(o=Number(a)))return r(g,0,1);if(s=t.substr(c+1,o),a!=s.length)return r(g,0,1);if(s.length){if(i=e.decodePacket(s,n,!0),g.type==i.type&&g.data==i.data)return r(g,0,1);if(!1===r(i,c+o,l))return}c+=o,a=""}}return""!=a?r(g,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,n){return t.length?void i(t,function(t,n){e.encodePacket(t,!0,!0,function(t){return n(null,t)})},function(t,e){var r=e.reduce(function(t,e){var n;return n="string"==typeof e?e.length:e.byteLength,t+n.toString().length+n+2},0),i=new Uint8Array(r),o=0;return e.forEach(function(t){var e="string"==typeof t,n=t;if(e){for(var r=new Uint8Array(t.length),s=0;s<t.length;s++)r[s]=t.charCodeAt(s);n=r.buffer}i[o++]=e?0:1;for(var a=n.byteLength.toString(),s=0;s<a.length;s++)i[o++]=parseInt(a[s]);i[o++]=255;for(var r=new Uint8Array(n),s=0;s<r.length;s++)i[o++]=r[s]}),n(i.buffer)}):n(new ArrayBuffer(0))},e.encodePayloadAsBlob=function(t,n){i(t,function(t,n){e.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var r=new Uint8Array(t.length),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);t=r.buffer,e[0]=0}for(var o=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),s=new Uint8Array(o.length+1),i=0;i<o.length;i++)s[i]=parseInt(o[i]);if(s[o.length]=255,v){var a=new v([e.buffer,s.buffer,t]);n(null,a)}})},function(t,e){return n(new v(e))})},e.decodePayloadAsBinary=function(t,n,r){"function"==typeof n&&(r=n,n=null);for(var i=t,o=[],s=!1;i.byteLength>0;){for(var a=new Uint8Array(i),l=0===a[0],u="",p=1;255!=a[p];p++){if(u.length>310){s=!0;break}u+=a[p]}if(s)return r(g,0,1);i=c(i,2+u.length),u=parseInt(u);var h=c(i,0,u);if(l)try{h=String.fromCharCode.apply(null,new Uint8Array(h))}catch(t){var f=new Uint8Array(h);h="";for(p=0;p<f.length;p++)h+=String.fromCharCode(f[p])}o.push(h),i=c(i,u)}var d=o.length;o.forEach(function(t,i){r(e.decodePacket(t,n,!0),i,d)})}}).call(e,function(){return this}())},function(t,e){t.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var r in t)n.call(t,r)&&e.push(r);return e}},function(t,e,n){(function(e){var r=n(15);t.exports=function(t){function n(t){if(!t)return!1;if(e.Buffer&&e.Buffer.isBuffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer||e.Blob&&t instanceof Blob||e.File&&t instanceof File)return!0;if(r(t)){for(var i=0;i<t.length;i++)if(n(t[i]))return!0}else if(t&&"object"==typeof t){t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON());for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&n(t[o]))return!0}return!1}return n(t)}}).call(e,function(){return this}())},function(t,e){t.exports=function(t,e,n){var r=t.byteLength;if(e=e||0,n=n||r,t.slice)return t.slice(e,n);if(e<0&&(e+=r),n<0&&(n+=r),n>r&&(n=r),e>=r||e>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(t),o=new Uint8Array(n-e),s=e,a=0;s<n;s++,a++)o[a]=i[s];return o.buffer}},function(t,e){t.exports=function(t,e,n){function r(t,o){if(r.count<=0)throw new Error("after called too many times");--r.count,t?(i=!0,e(t),e=n):0!==r.count||i||e(null,o)}var i=!1;return n=n||function(){},r.count=t,0===t?e():r}},function(t,e,n){var r;(function(t,i){!function(o){function s(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function a(t,e){return m(t>>e&63|128)}function c(t){if(0==(4294967168&t))return m(t);var e="";return 0==(4294965248&t)?e=m(t>>6&31|192):0==(4294901760&t)?(e=m(t>>12&15|224),e+=a(t,6)):0==(4292870144&t)&&(e=m(t>>18&7|240),e+=a(t,12),e+=a(t,6)),e+=m(63&t|128)}function l(){if(d>=f)throw Error("Invalid byte index");var t=255&h[d];if(d++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function u(){var t,e,n,r;if(d>f)throw Error("Invalid byte index");if(d==f)return!1;if(t=255&h[d],d++,0==(128&t))return t;if(192==(224&t)){var i;if((r=(31&t)<<6|(i=l()))>=128)return r;throw Error("Invalid continuation byte")}if(224==(240&t)){if(i=l(),e=l(),(r=(15&t)<<12|i<<6|e)>=2048)return r;throw Error("Invalid continuation byte")}if(240==(248&t)&&(i=l(),e=l(),n=l(),(r=(15&t)<<18|i<<12|e<<6|n)>=65536&&r<=1114111))return r;throw Error("Invalid WTF-8 detected")}var p=("object"==typeof t&&t&&t.exports,"object"==typeof i&&i);var h,f,d,m=String.fromCharCode,g={version:"1.0.0",encode:function(t){for(var e,n=s(t),r=n.length,i=-1,o="";++i<r;)e=n[i],o+=c(e);return o},decode:function(t){h=s(t),f=h.length,d=0;for(var e,n=[];!1!==(e=u());)n.push(e);return function(t){for(var e,n=t.length,r=-1,i="";++r<n;)(e=t[r])>65535&&(e-=65536,i+=m(e>>>10&1023|55296),e=56320|1023&e),i+=m(e);return i}(n)}};void 0!==(r=function(){return g}.call(e,n,e,t))&&(t.exports=r)}()}).call(e,n(12)(t),function(){return this}())},function(t,e){!function(){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<t.length;r++)n[t.charCodeAt(r)]=r;e.encode=function(e){var n,r=new Uint8Array(e),i=r.length,o="";for(n=0;n<i;n+=3)o+=t[r[n]>>2],o+=t[(3&r[n])<<4|r[n+1]>>4],o+=t[(15&r[n+1])<<2|r[n+2]>>6],o+=t[63&r[n+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},e.decode=function(t){var e,r,i,o,s,a=.75*t.length,c=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),p=new Uint8Array(u);for(e=0;e<c;e+=4)r=n[t.charCodeAt(e)],i=n[t.charCodeAt(e+1)],o=n[t.charCodeAt(e+2)],s=n[t.charCodeAt(e+3)],p[l++]=r<<2|i>>4,p[l++]=(15&i)<<4|o>>2,p[l++]=(3&o)<<6|63&s;return u}}()},function(t,e){(function(e){function n(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var i=new Uint8Array(n.byteLength);i.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=i.buffer}t[e]=r}}}var r=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,i=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),o=i&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),s=r&&r.prototype.append&&r.prototype.getBlob;t.exports=i?o?e.Blob:function(t,e){return n(t),new Blob(t,e||{})}:s?function(t,e){e=e||{};var i=new r;n(t);for(var o=0;o<t.length;o++)i.append(t[o]);return e.type?i.getBlob(e.type):i.getBlob()}:void 0}).call(e,function(){return this}())},function(t,e,n){function r(t){if(t)return function(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t)}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if((r=n[i])===e||r.fn===e){n.splice(i,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e);return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e){e.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},function(t,e){t.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){"use strict";function n(t){var e="";do{e=o[t%s]+e,t=Math.floor(t/s)}while(t>0);return e}function r(){var t=n(+new Date);return t!==i?(c=0,i=t):t+"."+n(c++)}for(var i,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),s=64,a={},c=0,l=0;l<s;l++)a[o[l]]=l;r.encode=n,r.decode=function(t){var e=0;for(l=0;l<t.length;l++)e=e*s+a[t.charAt(l)];return e},t.exports=r},function(t,e,n){(function(e){function r(){}function i(t){o.call(this,t),this.query=this.query||{},a||(e.___eio||(e.___eio=[]),a=e.___eio),this.index=a.length;var n=this;a.push(function(t){n.onData(t)}),this.query.j=this.index,e.document&&e.addEventListener&&e.addEventListener("beforeunload",function(){n.script&&(n.script.onerror=r)},!1)}var o=n(25),s=n(37);t.exports=i;var a,c=/\n/g,l=/\\n/g;s(i,o),i.prototype.supportsBinary=!1,i.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},i.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e;"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},i.prototype.doWrite=function(t,e){function n(){r(),e()}function r(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(t){i.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+i.iframeId+'">';o=document.createElement(t)}catch(t){(o=document.createElement("iframe")).name=i.iframeId,o.src="javascript:0"}o.id=i.iframeId,i.form.appendChild(o),i.iframe=o}var i=this;if(!this.form){var o,s=document.createElement("form"),a=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=u,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),r(),t=t.replace(l,"\\\n"),this.area.value=t.replace(c,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===i.iframe.readyState&&n()}:this.iframe.onload=n}}).call(e,function(){return this}())},function(t,e,n){(function(e){function r(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=p&&!t.forceNode,this.usingBrowserWebSocket||(h=i),o.call(this,t)}var i,o=n(26),s=n(27),a=n(36),c=n(37),l=n(38),u=n(3)("engine.io-client:websocket"),p=e.WebSocket||e.MozWebSocket;if("undefined"==typeof window)try{i=n(41)}catch(t){}var h=p;h||"undefined"!=typeof window||(h=i),t.exports=r,c(r,o),r.prototype.name="websocket",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e={agent:this.agent,perMessageDeflate:this.perMessageDeflate};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(e.headers=this.extraHeaders),this.localAddress&&(e.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?new h(t):new h(t,void 0,e)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},r.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},r.prototype.write=function(t){function n(){r.emit("flush"),setTimeout(function(){r.writable=!0,r.emit("drain")},0)}var r=this;this.writable=!1;for(var i=t.length,o=0,a=i;o<a;o++)!function(t){s.encodePacket(t,r.supportsBinary,function(o){if(!r.usingBrowserWebSocket){var s={};if(t.options&&(s.compress=t.options.compress),r.perMessageDeflate){("string"==typeof o?e.Buffer.byteLength(o):o.length)<r.perMessageDeflate.threshold&&(s.compress=!1)}}try{r.usingBrowserWebSocket?r.ws.send(o):r.ws.send(o,s)}catch(t){u("websocket closed before onclose event")}--i||n()})}(t[o])},r.prototype.onClose=function(){o.prototype.onClose.call(this)},r.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},r.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=l()),this.supportsBinary||(t.b64=1),(t=a.encode(t)).length&&(t="?"+t);return e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t},r.prototype.check=function(){return!(!h||"__initialize"in h&&this.name===r.prototype.name)}}).call(e,function(){return this}())},function(t,e){},function(t,e){var n=[].indexOf;t.exports=function(t,e){if(n)return t.indexOf(e);for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}},function(t,e){(function(e){var n=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(s,"").replace(a,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(r,"@").replace(i,"]").replace(o,""))?new Function("return "+t)():void 0):null}}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t,e,n){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}var i=n(7),o=n(35),s=n(45),a=n(46),c=n(47),l=n(3)("socket.io-client:socket"),u=n(29);t.exports=r;var p={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},h=o.prototype.emit;o(r.prototype),r.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[a(t,"open",c(this,"onopen")),a(t,"packet",c(this,"onpacket")),a(t,"close",c(this,"onclose"))]}},r.prototype.open=r.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},r.prototype.send=function(){var t=s(arguments);return t.unshift("message"),this.emit.apply(this,t),this},r.prototype.emit=function(t){if(p.hasOwnProperty(t))return h.apply(this,arguments),this;var e=s(arguments),n=i.EVENT;u(e)&&(n=i.BINARY_EVENT);var r={type:n,data:e};return r.options={},r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),delete this.flags,this},r.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},r.prototype.onopen=function(){l("transport is open - connecting"),"/"!==this.nsp&&(this.query?this.packet({type:i.CONNECT,query:this.query}):this.packet({type:i.CONNECT}))},r.prototype.onclose=function(t){l("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},r.prototype.onpacket=function(t){if(t.nsp===this.nsp)switch(t.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(t);break;case i.ACK:case i.BINARY_ACK:this.onack(t);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",t.data)}},r.prototype.onevent=function(t){var e=t.data||[];l("emitting event %j",e),null!=t.id&&(l("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?h.apply(this,e):this.receiveBuffer.push(e)},r.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var r=s(arguments);l("sending ack %j",r);var o=u(r)?i.BINARY_ACK:i.ACK;e.packet({type:o,id:t,data:r})}}},r.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(l("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):l("bad ack %s",t.id)},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},r.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)h.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},r.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},r.prototype.compress=function(t){return this.flags=this.flags||{},this.flags.compress=t,this}},function(t,e){t.exports=function(t,e){for(var n=[],r=(e=e||0)||0;r<t.length;r++)n[r-e]=t[r];return n}},function(t,e){"use strict";t.exports=function(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}},function(t,e){var n=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return e.apply(t,r.concat(n.call(arguments)))}}},function(t,e){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}}])}),alight.component("bot-flow-root",function(t,e,n){return{template:'<div class="_c_b_app" :class.active="is_bot_open">\n\t<div class="_tpbr">\n\t\t{{bot_name ? bot_name : \'Help Assistance\'}}\n\t\t<span class="_cls" @click="is_bot_open = false">\n\t\t\t<div class="_ic">\n\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16">\n\t\t\t\t<path d="M15.854 12.854c-0-0-0-0-0-0l-4.854-4.854 4.854-4.854c0-0 0-0 0-0 0.052-0.052 0.090-0.113 0.114-0.178 0.066-0.178 0.028-0.386-0.114-0.529l-2.293-2.293c-0.143-0.143-0.351-0.181-0.529-0.114-0.065 0.024-0.126 0.062-0.178 0.114 0 0-0 0-0 0l-4.854 4.854-4.854-4.854c-0-0-0-0-0-0-0.052-0.052-0.113-0.090-0.178-0.114-0.178-0.066-0.386-0.029-0.529 0.114l-2.293 2.293c-0.143 0.143-0.181 0.351-0.114 0.529 0.024 0.065 0.062 0.126 0.114 0.178 0 0 0 0 0 0l4.854 4.854-4.854 4.854c-0 0-0 0-0 0-0.052 0.052-0.090 0.113-0.114 0.178-0.066 0.178-0.029 0.386 0.114 0.529l2.293 2.293c0.143 0.143 0.351 0.181 0.529 0.114 0.065-0.024 0.126-0.062 0.178-0.114 0-0 0-0 0-0l4.854-4.854 4.854 4.854c0 0 0 0 0 0 0.052 0.052 0.113 0.090 0.178 0.114 0.178 0.066 0.386 0.029 0.529-0.114l2.293-2.293c0.143-0.143 0.181-0.351 0.114-0.529-0.024-0.065-0.062-0.126-0.114-0.178z"></path>\n\t\t\t\t</svg>\n\t\t\t</div>\t\n\t\t</span>\n\t</div>\n\n\t<div class="_bd" id="_c_b_app_scroller_id">\n\t\t<div class="_pged" al-if="page_end">\n\t\t\tAlready at the end of page!\n\t\t</div>\n\t\t<div class="_ldng" al-if="more_loading && !page_end">\n\t\t\t<c-bot-loader></c-bot-loader>\n\t\t</div>\n\t\t<div class="_msgs">\n\t\t\t<div al-repeat="i in msgs track by $index">\n\t\t\t\t<c-bot-mgs :index="$index" :data="i"></c-bot-mgs>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="_btm">\n\t\t\t<c-bot-sug al-if="suggestion"  :data="suggestion" ></c-bot-sug>\n\t\t\t<c-bot-typing al-if="is_typing"></c-bot-typing>\n\t\t</div>\n\t\t\n\t</div>\n\n\t<div class="_fld">\n\t\t<div class="_inpt">\n\t\t\t<input type="_text" class="_input" placeholder="Ask Bot!" autofocus="" al-value="query" @keydown.enter="sendQuery($event)"/>\n\t\t\t<button class="_fab _ripple" :disabled="query == \'\'" @click="sendQuery($event)">\n\t\t\t\t<span class="_post"></span>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\n\n</div>\n\n\n<div class="_c_b_app_tglbtn" al-if="!is_bot_open" @click="is_bot_open = true">\n\t<div class="_ic">\n\t\t<div class="_ldr" al-if="!is_bot_init"></div>\n\t\t<div class="_icn" al-if="is_bot_init">\n\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16">\n\t\t\t\t<path d="M12.25 11.75c-1.002 0-1.943-0.39-2.652-1.098l-1.598-1.598-1.598 1.598c-0.708 0.708-1.65 1.098-2.652 1.098s-1.944-0.39-2.652-1.098c-0.708-0.708-1.098-1.65-1.098-2.652s0.39-1.943 1.098-2.652c0.708-0.708 1.65-1.098 2.652-1.098s1.943 0.39 2.652 1.098l1.598 1.598 1.598-1.598c0.708-0.708 1.65-1.098 2.652-1.098s1.944 0.39 2.652 1.098c0.708 0.708 1.098 1.65 1.098 2.652s-0.39 1.943-1.098 2.652c-0.708 0.708-1.65 1.098-2.652 1.098zM10.652 9.598c0.427 0.427 0.994 0.662 1.598 0.662s1.171-0.235 1.598-0.662c0.427-0.427 0.662-0.994 0.662-1.598s-0.235-1.171-0.662-1.598c-0.427-0.427-0.994-0.662-1.598-0.662s-1.171 0.235-1.598 0.662l-1.598 1.598 1.598 1.598zM3.75 5.74c-0.604 0-1.171 0.235-1.598 0.662s-0.662 0.994-0.662 1.598c0 0.604 0.235 1.171 0.662 1.598s0.994 0.662 1.598 0.662c0.604 0 1.171-0.235 1.598-0.662l1.598-1.598-1.598-1.598c-0.427-0.427-0.994-0.662-1.598-0.662v0z"></path>\n\t\t\t</svg>\n\t\t</div>\n\t</div>\n\t<div class="_tx">\n\t\tHelp Bot\n\t</div>\n</div>',onStart:function(){t.initVars=function(){t.query="",t.msgs=[],t.Helper=__c_b_app.service.Helper,t.bot_socket=io.connect(__c_b_app.env.Api.urls.socket_connect),t.client_id=t.Helper.decodeId(document.querySelectorAll("["+__c_b_app.env.vars.bot_id_selecter_attr+"]")[0].attributes.getNamedItem(__c_b_app.env.vars.bot_id_selecter_attr).value),t.uuid=t.Helper.getCookie(__c_b_app.env.cookie.uuid_key),t.is_typing=!1,t.suggestion=null,t.is_scroll=!0,t.bot_scroller=document.getElementById("_c_b_app_scroller_id"),t.is_scroll=!0,t.more_loading=!1,t.current_page=1,t.page_end=!1,t.is_bot_open=!1,t.is_bot_init=!1,t.bot_name="Help Assistance"},t.onMsgPush=function(){n.watch("msgs",function(e,r){t.msgs.length>0&&("me"==t.msgs[t.msgs.length-1].by?(t.typing.show(),t.emitQuery(t.msgs[t.msgs.length-1].msg),t.playSound("user")):(t.typing.hide(),t.playSound("bot"))),setTimeout(function(){t.scrollToBottom(),n.scan()},10)},!0)},t.emitQuery=function(e){if("user"==t.msgFrom){console.log("query is requesting by user..."+e);var n={c_id:t.client_id,uuid:t.uuid,query:e};t.bot_socket.emit("modules_req",n)}},t.listenQueryResponse=function(){t.bot_socket.on("modules_res",function(e){console.log(e),t.pushMsgs(e.module.msg),t.performSuggestion(e.module.shortcut,e.module.shortcutData),n.scan()})},t.performSuggestion=function(e,n){e&&n&&(t.suggestion={},t.suggestion.type=e,t.suggestion.data=n,t.scrollToBottom())},t.onSuggestionSelect=function(e){t.msgFrom="user",t.suggestion=!1,t.pushMsgs(e,"me"),n.scan()},t.sendQuery=function(e){t.msgFrom="user",t.suggestion=!1,t.pushMsgs(t.query,"me"),t.query=""},t.initBotSocket=function(){var e={c_id:t.client_id,uuid:t.uuid};t.bot_socket.emit("init",e)},t.pushMsgs=function(e,n,r,i){if(e)if(n=n||"bot",r=r||new Date,"object"==typeof e)for(var o=0;o<e.length;o++)1==i?(console.log("reverse adding"),t.msgs.splice(0,0,{by:n,msg:e[o],timestamp:r}),t.msgs.join()):t.msgs.push({by:n,msg:e[o],timestamp:r});else 1==i?(console.log("reverse adding"),t.msgs.splice(0,0,{by:n,msg:e,timestamp:r}),t.msgs.join()):t.msgs.push({by:n,msg:e,timestamp:r})},t.connectBot=function(){console.log(t.uuid),t.uuid?__c_b_app.http.get(__c_b_app.env.Api.urls.get_msg+t.uuid+"/"+__c_b_app.env.vars.pagination.limit+"/1",function(e){t.initBotSocket(),t.listenQueryResponse();for(var r=JSON.parse(e).reverse(),i=0;i<r.length;i++)t.pushMsgs(r[i].msg,r[i].by,r[i].timestamp);setTimeout(function(){t.scrollToBottom(),t.typing.hide()},10),t.is_bot_init=!0,n.scan()}):(t.uuid=t.Helper.generateUUID(),t.Helper.setCookie(__c_b_app.env.cookie.uuid_key,t.uuid),t.initBotSocket(),t.listenQueryResponse(),t.is_bot_init=!0)},t.init=function(){t.initVars(),t.setupBot(),t.onMsgPush(),t.connectBot(),t.fetchMsgsOnVertScroll()},t.setupBot=function(){t.bot_socket.on("setup",function(e){console.log(e),t.Helper.setUpBotStyle(e.style),t.bot_name=e.bot_name})},t.typing={show:function(){t.is_typing=!0},hide:function(){t.is_typing=!1}},t.scrollToBottom=function(){t.is_scroll?t.bot_scroller.scrollTop=t.bot_scroller.scrollHeight+20:t.is_scroll=!0},t.fetchMsgsOnVertScroll=function(){t.bot_scroller.onscroll=function(){if(!t.page_end&&0==t.bot_scroller.scrollTop){if(1==t.more_loading)return;t.more_loading=!0;var e=t.bot_scroller.scrollHeight;n.scan(),__c_b_app.http.get(__c_b_app.env.Api.urls.get_msg+t.uuid+"/"+__c_b_app.env.vars.pagination.limit+"/"+ ++t.current_page,function(r){var i=JSON.parse(r);0==i.length&&(t.page_end=!0,t.more_loading=!1,n.scan());for(var o=0;o<i.length;o++)t.is_scroll=!1,t.pushMsgs(i[o].msg,i[o].by,i[o].timestamp,!0);setTimeout(function(){t.bot_scroller.scrollTop=t.bot_scroller.scrollHeight-e,t.typing.hide(),n.scan()},0),t.more_loading=!1,n.scan()})}}},t.playSound=function(t){if("user"==t){(e=new Audio(__c_b_app.env.Api.urls.sounds.bot)).play()}else{var e=new Audio(__c_b_app.env.Api.urls.sounds.user);e.play()}},t.init()}}}),alight.component("c-bot-loader",function(t,e,n){return{template:'<div class="_ldr">\n\t<div class="_itm" al-repeat="i in [0,1]" :class._rt = "(($index % 2) == 0)">\n\t\t<div class=\'_ld\' ></div>\n\t</div>\n</div>',onStart:function(){}}}),alight.component("c-bot-mgs",function(t,e,n){return{template:'<div class="_msg" :class._user="data.by == \'me\'">\n\t<div class="_icn"  al-if="data.by != \'me\'">\n\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16">\n\t\t\t<path fill="#666666" d="M12.25 11.75c-1.002 0-1.943-0.39-2.652-1.098l-1.598-1.598-1.598 1.598c-0.708 0.708-1.65 1.098-2.652 1.098s-1.944-0.39-2.652-1.098c-0.708-0.708-1.098-1.65-1.098-2.652s0.39-1.943 1.098-2.652c0.708-0.708 1.65-1.098 2.652-1.098s1.943 0.39 2.652 1.098l1.598 1.598 1.598-1.598c0.708-0.708 1.65-1.098 2.652-1.098s1.944 0.39 2.652 1.098c0.708 0.708 1.098 1.65 1.098 2.652s-0.39 1.943-1.098 2.652c-0.708 0.708-1.65 1.098-2.652 1.098zM10.652 9.598c0.427 0.427 0.994 0.662 1.598 0.662s1.171-0.235 1.598-0.662c0.427-0.427 0.662-0.994 0.662-1.598s-0.235-1.171-0.662-1.598c-0.427-0.427-0.994-0.662-1.598-0.662s-1.171 0.235-1.598 0.662l-1.598 1.598 1.598 1.598zM3.75 5.74c-0.604 0-1.171 0.235-1.598 0.662s-0.662 0.994-0.662 1.598c0 0.604 0.235 1.171 0.662 1.598s0.994 0.662 1.598 0.662c0.604 0 1.171-0.235 1.598-0.662l1.598-1.598-1.598-1.598c-0.427-0.427-0.994-0.662-1.598-0.662v0z"></path>\n\t\t</svg>\n\t</div>\n\t<div class="_item">\n\t\t{{data.msg}}\n\t</div>\n</div>',onStart:function(){t.index=t.index,t.data=t.data,t.name=t.in,t.click=function(){t.name="Shannubhag"}}}}),alight.component("c-bot-sug",function(t,e,n){return{template:'<div class="_sgtn" :class._option="data.type == \'option\'">\n\t<div class="_itm _ripple" al-repeat="i in data.data" @click="onSelect(i)">\n\t\t{{i}}\n\t</div>\n</div>',onStart:function(){t.data=t.data,t.change=t.change,t.onSelect=function(t){n.parentChangeDetector.scope.onSuggestionSelect(t)}}}}),alight.component("c-bot-typing",function(t,e,n){return{template:'<div class="_typing">\n\t<div class="_anim">\n\t  <div class="_bounce1"></div>\n\t  <div class="_bounce2"></div>\n\t  <div class="_bounce3"></div>\n\t</div>\n</div>',onStart:function(){}}});var __c_b_app_Controller=function(t,e){this.name=t,this.controller=e},__c_b_app_Api_Service=function(){this.host="127.0.0.1"==location.hostname||"localhost"==location.hostname?"http://127.0.0.1:3000/":"https://botflow.herokuapp.com/",this.urls={socket_connect:this.host+"sockets/bot",get_msg:this.host+"api/bot/msgs/",sounds:{bot:this.host+"bot/sound/bot.mp3",user:this.host+"bot/sound/user.mp3"}}},__c_b_app=new function(){this.env={host:"http://localhost:3000",vars:{bot_id_selecter_attr:"chat-bot-id",pagination:{limit:20}},bot_id:null,cookie:{uuid_key:"__chat__bot__uuid__"},Api:new __c_b_app_Api_Service,ref:{root:{ele:{name:"bot-flow-root",elm:null},style:{name:"bot-flow-style-root",elm:null}}}},this.rootScope={name:"Bot"},this.controllers=[],this.run=null,this.service={},this.runApp=function(t){this.run=t},this.addService=function(t,e){this.service[t]=new e},this.addController=function(t,e){this.controllers.push(new __c_b_app_Controller(t,e))},this.runControllers=function(){for(var t=0;t<this.controllers.length;t++)this.controllers[t].controller()},this.bootApp=function(){this.run(),this.runControllers()}};rivets.formatters.args=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}},__c_b_app.addService("Helper",function(){this.decodeId=function(t){var e={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var n,r,i,o,s,a,c,l="",u=0;for(t=e._utf8_encode(t);u<t.length;)o=(n=t.charCodeAt(u++))>>2,s=(3&n)<<4|(r=t.charCodeAt(u++))>>4,a=(15&r)<<2|(i=t.charCodeAt(u++))>>6,c=63&i,isNaN(r)?a=c=64:isNaN(i)&&(c=64),l=l+this._keyStr.charAt(o)+this._keyStr.charAt(s)+this._keyStr.charAt(a)+this._keyStr.charAt(c);return l},decode:function(t){var n,r,i,o,s,a,c="",l=0;for(t=t.replace(/[^A-Za-z0-9+/=]/g,"");l<t.length;)n=this._keyStr.indexOf(t.charAt(l++))<<2|(o=this._keyStr.indexOf(t.charAt(l++)))>>4,r=(15&o)<<4|(s=this._keyStr.indexOf(t.charAt(l++)))>>2,i=(3&s)<<6|(a=this._keyStr.indexOf(t.charAt(l++))),c+=String.fromCharCode(n),64!=s&&(c+=String.fromCharCode(r)),64!=a&&(c+=String.fromCharCode(i));return c=e._utf8_decode(c)},_utf8_encode:function(t){t=t.replace(/rn/g,"n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e},_utf8_decode:function(t){for(var e="",n=0,r=c1=c2=0;n<t.length;)(r=t.charCodeAt(n))<128?(e+=String.fromCharCode(r),n++):r>191&&r<224?(c2=t.charCodeAt(n+1),e+=String.fromCharCode((31&r)<<6|63&c2),n+=2):(c2=t.charCodeAt(n+1),c3=t.charCodeAt(n+2),e+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),n+=3);return e}};return e.decode(t)},this.generateUUID=function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)})},this.setCookie=function(t,e){document.cookie=t+"="+e+"; expires=Fri, 31 Dec 9999 23:59:59 GMT"},this.getCookie=function(t){for(var e=t+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return null},this.deleteCookie=function(t){document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"},this.setUpBotStyle=function(t){if(console.log("called theme config"),null!=t&&void 0!=t){var e=("left"==t.positionX?"left":"right")+":0;"+("top"==t.positionY?"top":"bottom")+":0";console.log("align",e);var n=document.createElement("style");n.type="text/css",n.setAttribute(__c_b_app.env.ref.root.style.name,""),css="\n                       ._c_b_app ._tpbr  { background-color: "+t.bgcolor+"; color:"+t.color+"; }\n                       ._c_b_app ._tpbr ._cls path { fill:"+t.color+"; }\n                       ._c_b_app ._fld ._inpt ._fab { background-color: "+t.bgcolor+"; color:"+t.color+"; }\n                       ._c_b_app_tglbtn { background-color: "+t.bgcolor+"; color:"+t.color+"; }\n                       ._c_b_app ._ic path { fill:"+t.color+"; }\n                       ._c_b_app ._msg ._item { background-color: "+t.bgcolor+"; color:"+t.color+"; border-color:"+t.bgcolor+"; }\n                       ._c_b_app ._sgtn ._itm:hover { background-color: "+t.bgcolor+"; color:"+t.color+"; }\n                       ._c_b_app ._sgtn._option ._itm { border-color: "+t.bgcolor+"; color:"+t.bgcolor+"; }\n                       ._c_b_app ._sgtn._option ._itm:hover { background-color: "+t.bgcolor+"; color:"+t.color+"; }\n                       ._c_b_app .d{ background-color: "+t.bgcolor+"; color:"+t.color+"; }\n                       ._c_b_app .d{ background-color: "+t.bgcolor+"; color:"+t.color+"; }\n                       ._c_b_app .d{ background-color: "+t.bgcolor+"; color:"+t.color+"; }\n                       ._c_b_app { height:"+t.height+"%; width:"+t.width+"; }\n                       ._c_b_app { "+e+" }\n                ",n.innerHTML=css,document.getElementsByTagName("head")[0].appendChild(n)}}}),__c_b_app.http={get:__c_b_envHttpGet,post:__c_b_envHttpPost},__c_b_app.template={attachByUrl:__c_b_envTemplateAttachByUrl},__c_b_app.runApp(function(){var t=document.querySelector("#"+__c_b_app.env.ref.root.ele.name);alight.bootstrap([t])}),window.onload=bootApp();